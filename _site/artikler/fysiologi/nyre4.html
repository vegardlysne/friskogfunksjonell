<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vegard Lysne">
<meta name="dcterms.date" content="2013-09-19">

<title>Nyrene del 4: Nyresykdom – Frisk og Funksjonell (arkiv)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Frisk og Funksjonell (arkiv)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../poster.html"> 
<span class="menu-text">Alle poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../naeringsstoffer.html"> 
<span class="menu-text">Næringsstoffene</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../metabolismen.html"> 
<span class="menu-text">Metabolismen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../fysiologi.html"> 
<span class="menu-text">Fysiologi</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../hormonsystemet.html"> 
<span class="menu-text">Hormoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kildekritikk.html"> 
<span class="menu-text">Kildekritikk</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kosthold-institusjoner.html"> 
<span class="menu-text">Kosthold i helseinstitusjoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../om.html"> 
<span class="menu-text">Om bloggen</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Nyrene del 4: Nyresykdom</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Fysiologi</div>
                <div class="quarto-category">Nyre</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vegard Lysne </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 19, 2013</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><a href="../../fysiologi.html">Tilbake til artikkelserien om menneskets fysiologi</a></p>
<p>I denne siste artikkelen om nyrene vil du få et innblikk i årsaker til og konsekvenser av nyresykdom, både akutt og kronisk. Ettersom nyrene utfører svært mange oppgaver i kroppen vår så er det åpenbart at konsekvensene av sykdom eller skade på nyrene også vil være tilsvarende alvorlige.</p>
<p>Tidligere har jeg vært inne på <a href="http://www.friskogfunksjonell.no/nyre-1/" title="Nyrene del 1 – Oppbygging og glomerulær filtrasjonsrate">nyrenes oppbygging og glomerulær filtrasjonsrate</a>, <a href="http://www.friskogfunksjonell.no/nyre-2/" title="Nyrene del 2 – Væskebalanse og urinproduksjon">urinproduksjon og væskebalanse</a>&nbsp;og til slutt <a href="http://www.friskogfunksjonell.no/nyre-3/" title="Nyrene del 3 – Elektrolyttstatus og andre funksjoner">elektrolyttstatus og øvrige funksjoner</a>. Alle disse er relevante for å skjønne hvordan konsekvensene av sykdom oppstår, og kan være verdt å sjekke ut først.</p>
<section id="nyrefunksjon-og-nyresvikt" class="level2">
<h2 class="anchored" data-anchor-id="nyrefunksjon-og-nyresvikt">Nyrefunksjon og nyresvikt</h2>
<p>Nyrenes funksjon måles i GFR, og sykdom eller skade vil kunne redusere denne. Dette medfører at nyrene ikke klarer å filtrere blodet godt nok, noe som gjør at molekyler som ellers burde skilles ut i stedet hoper seg opp i blodet. Nyrene kan ikke danne nye nefroner, så ved sykdom eller skade som irreversibelt rammer disse vil reduksjonen i antallet nefroner, og dermed redusert GFR, være varig. Antallet nefroner vil også reduseres etter hvert som vi blir eldre, og det er anslått at etter fylte 40 så vil antallet reduseres med 10% hvert 10. år. GFR måles ikke direkte, og man bruker ulike markører (for eksempel kreatininutskillelse) for å estimere en verdi.</p>
<p>Det er flere mekanismer som kan føre til redusert GFR, men alle sammen rammer på en eller annen måte systemene som er ansvarlig for å regulere GFR i utgangspunktet, altså filtrasjonstrykket eller filtrasjonskoeffisienten, K<sub>f</sub>.</p>
<blockquote class="blockquote">
<p><em>GFR = K<sub>f</sub> x netto filtrasjonstrykk</em></p>
</blockquote>
<p>Nyresvikt kan forårsakes før, inni eller etter nyrene, og det kan være vanskelig å skille disse på bakgrunn av symptomer. Prerenal nyresvikt skyldes abnormaliteter utenfor nyrene, renal eller intrarenal nyresvikt skyldes abnormaliteter i selve nyrene (nyrekapillærene, glomerulus eller tubuli) og postrenal nyresvikt rammer utførselsveiene for urin. Nyresykdom deles primært inn i to kategorier, akutt og kronisk. Innen de to hovedkategoriene finnes det flere spesifikke nyresykdommer som kan ramme ulike deler av nyrene.</p>
</section>
<section id="akutt-nyresvikt" class="level2">
<h2 class="anchored" data-anchor-id="akutt-nyresvikt">Akutt nyresvikt</h2>
<p>Akutt nyresvikt kjennetegnes ved en plutselig og drastisk reduksjon av GFR. Konsekvensene av akutt nyresvikt er at vi ikke får skilt ut tilstrekkelig med væske og metabolitter, noe som gjør at disse hoper seg opp. Væskeretensjon kan medføre ødemer og forhøyet blodtrykk. Redusert utskillelse av kalium er den mest kritiske konsekvensen, ettersom hyperkalemi kan medføre hjertearytmi og hjertestans. Siden nyrene heller ikke får skilt ut syreoverskudd så vil nyresvikt medføre metabolsk acidose, som i tillegg til å være dødelig i seg selv også ytterligere reduserer utskillelsen av kalium. Akutt nyresvikt kan være prerenal, renal og postrenal.</p>
<p>Prerenal akutt nyresvikt skyldes redusert blodtilførsel til nyrene. Som beskrevet i første artikkel er nyrenes blodtilførsel i utgangspunktet enormt stor, noe som er viktig for at nyrene skal kunne regulere væske- og elektrolyttstatus på en tilfredsstillende måte. Redusert blodtilførsel følges av redusert GFR og dermed redusert urinutskillelse, oliguri, som fører til at væske og metabolitter hoper seg opp. Dersom urinproduksjonen stopper helt opp kalles det anuri. Noen årsaker til prerenal akutt nyresvikt er store blødninger, diaré/oppkast, brannskader (stort væsketap fra huden) og hjertesvikt.</p>
<p>Prerenal akutt nyresvikt er vanligvis reversibel så lenge blodtilførselen ikke reduseres til under 20-25% av normalen og årsaken behandles før det oppstår skade på nyrecellene som følge av oksygenmangel (iskemi). Grunnen til at nyrene tåler en såpass stor reduksjon i blodtilførselen uten at det oppstår iskemi er at GFR reduseres. Da reduseres også behovet for reabsorbsjon av natrium som er den største energi- og oksygenkrevende prosessen i nyrene. Når GFR reduseres så følges dette av et redusert oksygenbehov, og rundt 20-25% av normal blodtilførsel er tilstrekkelig for å holde nyrecellene i live. Dersom årsaken til den prerenale nyresvikten ikke korrigeres kan det altså oppstå skade på selve nyrecellene, og renal nyresvikt oppstår.</p>
<p>Renal akutt nyresvikt skyldes abnormaliteter inne i selve nyrene, som kan ramme kapillærnettverket, nyretubuli eller interstitiet (vevet som omkranser tubuli).</p>
<ul class="incremental">
<li>Glomerulonefritt er en betennelsestilstand som skader glomerulus. Dette skyldes vanligvis en unormal immunrespons som følge av infeksjoner andre steder i kroppen, og som oftest er det snakk om streptokokkvirus (som eksempelvis kan ramme halsen eller huden). Det som skader glomerulus er ikke infeksjonen i seg selv, men at det dannes komplekser mellom viruset og antistoffer. Disse kompleksene fanges inne i glomerulus, noe som fører til at celler som ligger her ødelegges. Det avleires også mange hvite blodceller som medfører blokkering av flere glomerulus. De som ikke blokkeres kan bli veldig permeable, slik at proteiner og røde blodceller filtreres over i tubuli og skilles ut i urinen. Vanligvis vil glumerulonefritt gå over etter 1-2 uker, og de fleste oppnår normal nyrefunksjon etter en stund. I noen tilfeller kan det ha oppstått skader som ikke lar seg reparere, slik at tilstanden kan gå over i kronisk nyresvikt.</li>
<li>Tubulær nekrose er en tilstand der epitelcellene i nyretubuli ødelegges. Dette kan skyldes utilstrekkelig oksygentilførsel (iskemi) som følge av prerenale komplikasjoner, eller det kan komme som følge av forgiftning. Det er mange ulike toksiner som kan ødelegge disse cellene, deriblant tungmetaller som bly og kvikksølv, samt en rekke medikamenter (som oftest ved misbruk). Døde epitelceller kan ende opp med å blokkere nefronene slik at disse ikke kan produsere urin.</li>
<li>Pyelonefritt er en bakteriell infeksjon av nyreinterstitiet som vanligvis skyldes urinveisinfeksjon. Immunologiske reaksjoner på medikamenter kan også forårsake betennelser i nyreinterstitiet.</li>
</ul>
<p>Postrenal akutt nyresvikt skyldes abnormaliteter i urinlederne, noe som gir blokkeringer for urinflommen ut fra nyrene. En slik blokkering kan, litt avhengig av hvor den sitter, ramme en eller begge nyrer. Dersom bare en nyre er rammet vil det ikke medføre store endringer i utskillelsen av væske og elektrolytter. Nyrefunksjonen kan gjenopprettes dersom obstruksjonen korrigeres i løpet av noen timer. Kronisk blokkering kan medføre uhelbredelig nyreskade. Nyrestein er den vanligste årsaken til denne typen nyresvikt. Blokkeringer i blæren eller urinrøret kan også være en årsak.</p>
</section>
<section id="kronisk-nyresvikt" class="level2">
<h2 class="anchored" data-anchor-id="kronisk-nyresvikt">Kronisk nyresvikt</h2>
<p>Kronisk nyresvikt skyldes et progressivt tap av nefroner. Denne prosessen er irreversibel, ettersom nyrene ikke kan danne nye nefroner. Vi tåler en ganske stor reduksjon i antallet nefroner, og kritiske symptomer trenger ikke å oppstå før aktiviteten er redusert til under 25% av normalt. Kronisk nyresvikt kan oppstå som følge av abnormaliteter i blodkar, glomerulus, nyretubuli, interstitiet eller urinveiene, men resultatet er alltid en reduksjon i antallet fungerende nefroner, og dermed en reduksjon i GFR.</p>
<p>Kronisk nyresvikt deles inn i fem ulike stadier etter hvor stor reduksjonen i GFR er, og sluttstadiet kalles end-stage renal disease (ESRD). Ettersom kronisk nyresvikt er progressiv og irreversibel, så vil man på et eller annet tidspunkt komme til sluttstadiet, og da blir man avhengig av nyreerstattende behandling som dialyse eller transplantasjon. Denne prosessen kan ikke stoppes, men&nbsp; ved å senke blodtrykket og det hydrostatiske trykket i glomerulus ved hjelp av medikamenter kan den forsinkes.</p>
<p><img src="images/clipboard-3441803026.png" class="img-fluid"> Figuren viser hvordan tapet av nefroner er progressivt</p>
<p>Kronisk nyresvikt skyldes som regel nedsatt K<sub>f</sub> (overflate eller permeabilitet). Tidligere var det antatt at ulike former for glomerulonefritt var den vanligste utløsende årsaken til kronisk nyresvikt. I dag regnes imidlertid diabetes og høyt blodtrykk (hypertensjon) for å være de vanligste årsakene, og er regnet for å forårsake over 70% av sykdomstilfellene. Overvekt er regnet for å være den viktigste risikofaktoren for å utvikle både diabetes og hypertensjon. I noen tilfeller kan akutt nyresvikt utvikle seg videre til kronisk nyresvikt.</p>
<p>Diabetes og hypertensjon medfører både økt tykkelse på kapillærveggene i glomerulus eller direkte skade på kapillærene, noe som reduserer permeabilitet og filtrasjonsoverflate. Dette gir en reduksjon i K<sub>f</sub>, som reduserer GFR. Ved noen nyresykdommer vil den negative ladningen i glomeruluskapillærenes membraner tapes først, noe som gjør at små proteiner filtreres og havner i urinen. Dette gjelder i stor grad plasmaproteiner som albumin, og albuminuri/proteinuri er derfor et tegn på nedsatt nyrefunksjon.</p>
</section>
<section id="konsekvenser-av-kronisk-nyresvikt" class="level2">
<h2 class="anchored" data-anchor-id="konsekvenser-av-kronisk-nyresvikt">Konsekvenser av kronisk nyresvikt</h2>
<p>Ettersom nyrenes primære oppgave er å regulere utskillelsen av væske og metabolitter, er forstyrrelser i disse en konsekvens av nyresvikt. Redusert utskillelse av væske og elektrolytter gir vannansamlinger i kroppen, ødemer. Metabolsk acidose er en annen viktig konsekvens, ettersom nyrene ikke lenger klarer å skille ut syreoverskuddet. Nitrogenholdige metabolske endeprodukter som urea, kreatinin og urinsyre hoper seg om som følge av at utskilellsen reduseres, og det samme gjelder andre metabolitter som eksempelvis kalium (se over) og fosfat. Ved kronisk nyresvikt vil vi ofte ikke se store forandringer før nyrefunksjonen faller under 25% ettersom de gjenværende nefronene til en viss grad kan kompensere for de som forsvinner.</p>
<p>Nyresvikt fører til acidose, altså en forsuring av blodet. Nyrene er sammen med lungene ansvarlig for å regulere blodets pH, som holdes innenfor strenge, fysiologiske grenser. Normalt produserer vi mer sure enn basiske metabolitter, og nyrenes oppgave er å skille ut dette syreoverskuddet slik at pH ikke endres. Ved nyresvikt reduseres nyrenes evne til å skille ut overflødig syre, og når blodets buffersystemer overskrides så begynner pH å synke. Dette er i verste konsekvens dødelig.</p>
<p>Anemi er en vanlig konsekvens av nyresvikt. Dette skyldes redusert produksjon av erytropoietin (EPO), som er hormonet som stimulerer produksjonen av røde blodceller. Dette kan behandles ved å tilføre kunstig EPO.</p>
<p>Nyresvikt er også en årsak til beinskjørhet. En av årsakene til dette er at nyrene er ansvarlig for å aktivere D-vitamin, som deretter kan stimulere opptaket av kalsium i tarmen. Ved nyresvikt reduseres mengden aktivt D-vitamin. En økning i blodnivåene av fosfat bidrar til å øke kalsiumfosfatproduktet, som gjør at vi kan få utfellinger av kalsiumfosfat. Dette reduserer konsentrasjonen av fritt kalsium i blodet, noe som stimulerer til kalsiumfrigjøring fra bein.</p>
</section>
<section id="behandling" class="level2">
<h2 class="anchored" data-anchor-id="behandling">Behandling</h2>
<p>Behandlingen av kronisk nyresvikt er veldig individuelt tilpasset. Dette skyldes at ulik grad av reduksjon i GFR har ulike konsekvenser, ettersom utskillelsen av ulike metabolitter reguleres ulikt. Noen metabolitter, som kreatinin, er veldig avhengig av GFR for å skilles ut, og en reduksjon av GFR følges derfor av økte nivåer. Utskillelsen av andre metabolitter, som eksempelvis elektrolyttene, er bedre regulert ved filtrasjon, reabsorbsjon og sekresjon, og nivåene kan derfor i større grad vedlikeholdes selv om GFR reduseres. Kostrestriksjoner er vanlig ved nyresvikt, ettersom redusert inntak gjennom kosten kan være med å forhindre opphopning av metabolitter. Kostrestriksjoner vil alltid vurderes på individuell basis.</p>
<p><a href="http://www.friskogfunksjonell.no/natriumredusert-kost/" title="Natriumredusert kost">Natriumredusert</a>, <a href="http://www.friskogfunksjonell.no/kaliumredusert-kost/" title="Kaliumredusert kost">kaliumredusert</a> eller <a href="http://www.friskogfunksjonell.no/fosfatredusert-kost/" title="Fosfatredusert kost">fosfatredusert</a> kost er vanlige kosttiltak.</p>
<p>Når nyrefunksjonen blir dårlig nok vil ikke kostrestriksjoner lenger være nok for å forhindre at metabolitter hopes opp. Da vil pasienten bli avhengig av dialysebehandling, der man kobles til en maskin som gjør nyrenes jobb ved å rense blodet. Transplantasjon er siste utvei.</p>
</section>
<section id="oppsummering" class="level2">
<h2 class="anchored" data-anchor-id="oppsummering">Oppsummering</h2>
<ul class="incremental">
<li>Nyrefunksjon måles ved å estimere GFR. Nyresvikt medfører redusert GFR, og dermed reduseres nyrenes evne til å skille ut metabolitter i urinen.</li>
<li>Nyresvikt kan være prerenal, renal eller postrenal, avhengig av hva som forårsaker sykdommen.</li>
<li>Akutt nyresvikt kjennetegnes av et plutselig og drastisk fall i GFR, og kan skyldes blødninger, infeksjoner, blokkeringer eller forgiftning.</li>
<li>Kronisk nyresvikt er en progressiv og irreversibel prosess der GFR gradvis reduseres. De viktigste årsakene til kronisk nyresvikt er diabetes og hypertensjon, men også infeksjoner, blokkeringer eller forgiftning kan være årsaker. I noen tilfeller kan akutt nyresvikt utvikles videre til kronisk nyresvikt.</li>
<li>Konsekvensene av nyresvikt er mange. Opphopning av metabolitter, metabolsk acidose, anemi og beinskjørhet er blant de vanligste.</li>
</ul>
<p>Informasjonen i denne artikkelen er basert på en lærebok i fysiologi (1). Artikkelen er ment å gi en oversikt, og jeg anbefaler interesserte å lese i denne eller en annen fysiologibok for nærmere beskrivelse av detaljer.</p>
<ol class="incremental" type="1">
<li>Guyton A, Hall J: <strong>Textbook of Medical Physiology</strong>, 12 edn: Saunders/Elsevier; 2011.</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>