<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vegard Lysne">
<meta name="dcterms.date" content="2013-11-07">

<title>Homeostase – Frisk og Funksjonell (arkiv)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Frisk og Funksjonell (arkiv)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../poster.html"> 
<span class="menu-text">Alle poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../naeringsstoffer.html"> 
<span class="menu-text">Næringsstoffene</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../metabolismen.html"> 
<span class="menu-text">Metabolismen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../fysiologi.html"> 
<span class="menu-text">Fysiologi</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../hormonsystemet.html"> 
<span class="menu-text">Hormoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kildekritikk.html"> 
<span class="menu-text">Kildekritikk</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kosthold-institusjoner.html"> 
<span class="menu-text">Kosthold i helseinstitusjoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../om.html"> 
<span class="menu-text">Om bloggen</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Homeostase</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Fysiologi</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vegard Lysne </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 7, 2013</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><a href="../../fysiologi.html">Tilbake til artikkelserien om menneskets fysiologi</a></p>
<p>Kroppen vår består av trillioner av celler, som alle sammen bader i det samme indre miljøet. Disse cellene er stort sett bygget opp av de samme bestanddelene, og stiller de samme kravene til miljøet rundt for å overleve, og derfor har vi drøssevis med kontrollmekanismer for å holde dette mljøet så stabilt som mulig.. Overordnet omtales dette som homeostase, og det ser jeg nærmere på i dette innlegget.</p>
<p>Homeostase er et begrep som i humanfysiologien brukes om opprettholdelse av det indre miljøet. Selv om de ulike cellene har forskjellige funksjoner, har de også mye felles. For eksempel bruker alle cellene oksygen for å hente ut energi fra de energigivende næringsstoffene, stort sett ved nøyaktig de samme reaksjonsrekkene. Disse er beskrevet nærmere i artikkelserien om <a href="http://www.friskogfunksjonell.no/metabolismen/" title="Metabolismen">metabolismen</a>. Alle celler er avhengig av tilførsel av næringsstoffer og en riktig balanse av elektrolytter. Riktig surhetsgrad er også helt avgjørende for cellenes overlevelse. Alle bestanddelene i blodet og ekstracellulærvæsken holdes derfor innenfor snevre fysiologiske grenser, og de fleste organene våre bidrar til dette på ulike måter. Under følger en liten oversikt over ulike aspekter ved denne reguleringen.</p>
<section id="respirasjon" class="level2">
<h2 class="anchored" data-anchor-id="respirasjon">Respirasjon</h2>
<p>Lungene har en veldig viktig funksjon når det kommer til å opprettholde nivåene av ulike gasser i blodet. Alle cellene trenger oksygen, og dette tilføres som alle vet når vi trekker pusten. Da fraktes oksygenet ned i lungene, der det lett diffunderer over i blodet hvor det binder til proteinet hemoglobin i de røde blodcellene. Når næringsstoffene brytes ned produseres karbondioksid som et biprodukt. Dette transporteres i blodet til lungene, hvor det forlater kroppen når vi puster ut.&nbsp;Hemoglobin har en unik evne til å endre struktur som følge av lokale endringer i oksygen- og karbondioksidnivåer. Som følge av dette bindes oksygenet enten sterkere eller svakere, noe som gjør at hemoglobinet kan frigi akkurat nok oksygen til å holde blodkonsentrasjonen på ønsket nivå.</p>
<p>Konsentrasjonen av karbondioksid i blodet er viktig å kontrollere for å opprettholde riktig syre/base-balanse. Når karbondioksidmengden økes, synker pH, noe som gir et surt miljø. Vi har viktige kontrollsystemer som påvirker dette, og det viktigste er at karbondioksid i blodet stimulerer respirasjonssenteret i hjernen og dermed får oss til å puste. Dette er den enkle forklaringen på hvorfor vi puster fortere når vi er fysisk aktive og derfor produserer mer karbondioksid. Det forklarer også hvorfor det er en grense for hvor lenge vi klarer å holde pusten, da dette fører til en opphopning av karbondioksid.</p>
</section>
<section id="opptak-metabolisme-og-utskillelse" class="level2">
<h2 class="anchored" data-anchor-id="opptak-metabolisme-og-utskillelse">Opptak, metabolisme og utskillelse</h2>
<p>Når vi spiser så absorberer vi næringsstoffer i <a href="http://www.friskogfunksjonell.no/fordoyelsessystemet/" title="Fordøyelsessystemet">tarmen</a>. Da øker konsentrasjonen av de ulike næringsstoffene i blodet midlertidig, men på grunn av våre mange kontrollmekanismer så normaliseres disse raskt. For det første så reguleres selve opptaket av de ulike næringsstoffene i tarmen, noe du kan lese mer om i artikkelserien om <a href="http://www.friskogfunksjonell.no/naeringsstoffene/" title="Artikkelserie om Næringsstoffene">næringsstoffene</a>. For det andre har vi hormonelle responser, deriblant utskillelse av insulin, som sørger for at næringsstoffene blir tatt opp i celler og vev for å lagres. Deretter frigis de sakte og kontrollert i ettertid, slik at nivåene i blodet holdes innenfor normale grenser.</p>
<p>De fleste næringsstoffene fraktes til <a href="http://www.friskogfunksjonell.no/leveren/" title="Leveren – metabolismens dirigent">leveren</a>&nbsp;etter at de kommer ut i blodet, og her bearbeides de før de sendes ut igjen i blodet for å fraktes til målcellene. Leveren kontrollerer de fleste aspekter ved metabolismen, og et godt eksempel er regulering av blodsukkeret. Ved å lagre glukose som glykogen, kan leveren sørge for å frigi glukose til blodet i kontrollert tempo, slik at blodsukkeret holdes stabilt. Etter et måltid øker innlagringen (her er også muskelvevet viktig, som har stor lagringskapasitet), før frigjøringen til blodet deretter økes i fasteperioden. Leveren er også sentral i fettmetabolismen, og regulerer nivåene av frie fettsyrer i blodet ved å absorbere disse og enten bryte de ned til ketoner eller inkorporere dem i lipoproteiner. Leveren produserer de fleste blodproteinene, som er viktig for transport av mange substanser i blodet og for å opprettholde det osmotiske trykket. En funksjon som er like viktig som de foregående er modifisering av molekyler som gjør at de kan skilles ut fra kroppen, og noe skilles også ut direkte fra leveren via gallen.</p>
<p>Utskillelse av væske metabolitter i urinen skjer via <a href="http://www.friskogfunksjonell.no/nyre-2/" title="Nyrene del 2 – Væskebalanse og urinproduksjon">nyrene</a>, og dette er det viktigste reguleringspunktet for å opprettholde væskebalansen og nivåene av elektrolytter i blodet. Endepunkter fra metabolismen som kreatinin og urea, samt andre nedbrytningsprodukter skilles også ut denne veien. <a href="http://www.friskogfunksjonell.no/nyre-1/" title="Nyrene del 1 – Oppbygging og glomerulær filtrasjonsrate">Nyrene filtrerer daglig hele blodvolumet 30-40 ganger</a>, noe som gir gode forhold til å <a href="http://www.friskogfunksjonell.no/nyre-3/" title="Nyrene del 3 – Elektrolyttstatus og andre funksjoner">kontrollere blodnivåene av metabolitter nøye</a>. Ved hjelp av filtrasjon, reabsorbsjon og ekskresjon reguleres utskillelsen etter behov. Det er derfor ikke overraskende at det kan gå hardt utover den homeostatiske reguleringen om <a href="http://www.friskogfunksjonell.no/nyre-4/" title="Nyrene del 4 – nyresykdom">nyrene skades</a>.</p>
</section>
<section id="hormoner-og-nervesystemet" class="level2">
<h2 class="anchored" data-anchor-id="hormoner-og-nervesystemet">Hormoner og nervesystemet</h2>
<p>Produksjon og utskillelse av hormoner, samt nerveimpulser fra de utallige nervecellene våre er også viktig for å opprettholde homeostasen. Nerveimpulser stimuleres av reseptorer som oppfatter miljøet rundt cellene, og ved å påvirke de ulike vevene vil disse nervesignalene bidra til å gjenopprette homeostasen. Et godt eksempel på dette er blodtrykket, som styres av hvor mye blod som pumpes ut av hjertet kombinert med utvidelse/innstramming av blodårer (i tillegg til det totale blodvolumet). Disse faktorene reguleres i stor grad av nerveimpulser.</p>
<p>Hormoner er signalstoffer som fraktes i blodet og regulerer cellulære prosesser ved å binde til reseptorer i cellemembranen eller inne i cellen. Vi har åtte store endokrine kjertler som produserer hormoner, og produksjonen styres etter behov. Insulin er et sentralt hormon som produseres i <a href="http://www.friskogfunksjonell.no/bukspyttkjertelen/" title="Bukspyttkjertelen">bukspyttkjertelen</a> som følge av endringer i blodsukkeret, paratyroideahormon produseres i biskjoldbruskkjertelen som følge av lave blodnivåer av kalsium og aldosteron produseres i binyrene som følge av reduserte natriumnivåer i blodet.</p>
<p>Nervesystemet og hormonene styrer altså gjennom ulike mekanismer det meste som skjer i kroppen vår, og sørger for at homeostasen opprettholdes.</p>
</section>
<section id="negativ-og-positiv-feedback" class="level2">
<h2 class="anchored" data-anchor-id="negativ-og-positiv-feedback">Negativ og positiv feedback</h2>
<p>De fleste reguleringsmekanismene fungerer ved det som kalles negativ feedback. Dette fungerer kort fortalt slik at en viss stimuli aktiverer prosesser som motvirker den opprinnelige stimulien. Når blodtrykket øker, aktiverer dette flere prosesser som gjør at blodtrykket synker igjen. Det samme gjelder motsatt vei. Når blodtrykket faller, eksempelvis som følge av blødning, vil det aktiveres prosesser som fører til at blodtrykket normaliseres. Øker blodsukkeret produserer vi insulin som fører til at blodsukkeret faller igjen. Når nivåene av et hormon i blodet øker, vil dette som oftest redusere produksjonen av det samme hormonet for å unngå for høy aktivitet. Alle disse er eksempler på negativ feedback siden responsen motvirker den opprinnelige endringen.</p>
<p>I motsatt ende har vi positiv feedback, og som navnet tilsier så handler dette om prosesser som øker effekten av den opprinnelige stimulien. Et eksempel på dette er redusert hjertefunksjon som følge av blødninger. Når blodmengden reduseres tilstrekkelig vil ikke hjertet få nok tilførsel av blod til å pumpe optimalt. Da synker blodtrykket, noe som ytterligere reduserer hjertets tilførsel av blod. I de fleste tilfeller vil altså positiv feedback føre til en stadig forverring av en tilstand, så heldigvis styres det meste med negativ feedback. Et spesifikt tilfelle der positiv feedback bidrar på gunstig måte er i sårtilheling, der aktivering av blodplater fører til at flere blodplater aktiveres. Det finnes noen andre slike eksempler, men stort sett kan disse sees på som en bestanddel av en overordnet negativ feedback, og i eksempelet med sårtilheling er dette en del av den negative feedback-mekanismen for å motvirke blodtapet.</p>
</section>
<section id="avvik-fra-homeostase" class="level2">
<h2 class="anchored" data-anchor-id="avvik-fra-homeostase">Avvik fra homeostase</h2>
<p>Et friskt menneske vil klare å opprettholde homeostasen i de fleste tilfeller. I noen tilfeller kan imidlertid stimulien være så kraftig at kapasiteten for regulering overskrides, noe som fører til avvik. Et godt eksempel på en slik situasjon er kraftige blødninger. Normalt vil vi tåle å tape en del blod, ettersom vi til en viss grad kan regulere blodtrykk og hjertets funksjon til å tilpasses en lavere blodmengde. Etter hvert som vi produserer nytt blod reverseres dette, og vi fungerer igjen som normalt. Ved større blødninger kan blodtapet bli så stort at vi ikke klarer å kompensere, noe som da kan føre til større problemer og eventuelt død. Et annet eksempel er forgiftninger, der tilførselen av et stoff blir så stor at vi ikke klarer å kvitte oss med det raskt nok.</p>
<p>Vanligvis skyldes avvik fra homeostasen sykdom. Ved diabetes har vi for eksempel problemer med å regulere blodsukkeret, noe som også påvirker metabolismen av de øvrige næringsstoffene. Ved nyresvikt har vi problemer med utskillelsen av stoffer fra blodet, noe som påvirker konsentrasjonen av blant annet elektrolytter. Lungesykdommer kan påvirke evnen til å regulere konsentrasjonen av gasser i blodet, og leversykdom vil blant annet påvirke produksjonen av proteiner som er viktig for transport av ulike substanser i blodet. Dette er bare eksempler, og listen kunne vart i evigheter. Poenget er at sykdom påvirker evnen til å opprettholde homeostasen, noe som kan føre til store problemer eller død.</p>
</section>
<section id="konklusjon" class="level2">
<h2 class="anchored" data-anchor-id="konklusjon">Konklusjon</h2>
<p>Alle kroppens celler er avhengig av et stabilt indre miljø for å fungere, og dette kalles i fysiologien for homeostase. I denne innføringen i homeostase og ulike mekanismer som sørger for denne har du sett hvordan de ulike organene og signalmåtene bidrar til å opprettholde et stabilt miljø, og dette gjør at vi er rustet til å tåle store variasjoner i det ytre miljøet.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>