<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vegard Lysne">
<meta name="dcterms.date" content="2013-07-18">

<title>Nyrene del 1: Oppbygging og glomerulær filtrasjonsrate – Frisk og Funksjonell (arkiv)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Frisk og Funksjonell (arkiv)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../poster.html"> 
<span class="menu-text">Alle poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../naeringsstoffer.html"> 
<span class="menu-text">Næringsstoffene</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../metabolismen.html"> 
<span class="menu-text">Metabolismen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../fysiologi.html"> 
<span class="menu-text">Fysiologi</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../hormonsystemet.html"> 
<span class="menu-text">Hormoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kildekritikk.html"> 
<span class="menu-text">Kildekritikk</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kosthold-institusjoner.html"> 
<span class="menu-text">Kosthold i helseinstitusjoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../om.html"> 
<span class="menu-text">Om bloggen</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Nyrene del 1: Oppbygging og glomerulær filtrasjonsrate</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Fysiologi</div>
                <div class="quarto-category">Nyre</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vegard Lysne </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 18, 2013</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><a href="../../fysiologi.html">Tilbake til artikkelserien om menneskets fysiologi</a></p>
<p>For at vi skal fungere normalt er vi avhengig av at konsentrasjonene av de ulike molekylene i blodet holder seg noenlunde på de nivåene de skal være. For mye eller for lite av noe vil i de fleste tilfeller føre til uønskede konsekvenser. Nyrene er ekstremt viktige i denne sammenhengen, ettersom de i stor grad styrer dette ved å regulere hvor mye vi skiller ut gjennom urinen. I denne artikkelen, som er den første av fire, får du en innføring i hvordan nyrene er bygget opp og hva glomerulær filtrasjonsrate er for noe.</p>
<p><img src="images/clipboard-895948937.png" class="img-fluid"></p>
<section id="nyrenes-anatomi-og-oppbygning" class="level2">
<h2 class="anchored" data-anchor-id="nyrenes-anatomi-og-oppbygning">Nyrenes anatomi og oppbygning</h2>
<p>Vi har to nyrer som ligger plassert på den bakre bukveggen, utenfor selve bukhulen. En voksen nyre er på størrelse med en knyttneve og veier om lag 150g. På siden som vender inn mot midten av kroppen finner vi en åpning, nyrehilus, der nyrearterien, nyrevenen, lymfen, nervevev og urinlederen passerer inn i eller ut fra nyrene.</p>
<p>Nyrenes anatomi kan overordnes deles i to deler. Ytterst finner vi en beskyttende bindevevskapsel som kalles nyrebarken, som primært er der for å beskytte strukturene som ligger innenfor. Under/innenfor barken ligger nyremargen. I nyremargen finner vi strukturer som kalles nyrepyramider. Disse plasserer seg inntil nyrebarken, og toppen leder ut i samlerør som peker inn mot nyrebekkenet, som er hulrommet i midten som leder ut i urinlederen. Hver nyre har 8-10 slike nyrepyramider.</p>
<p><img src="images/clipboard-537764098.png" class="img-fluid"></p>
<p>De funksjonelle enhetene i nyrene kalles nefroner. Hver nyre har omtrent en million slike enheter, og det er disse som filtrerer blodet og produserer urin. Omtrent 22% av alt blodet som forlater hjertet går til nyrene, noe som tilsvarer over en liter per minutt. Med tanke på nyrenes størrelse er dette en enorm blodtilførsel, og sammenlignet med hjernen så mottar nyrene syv ganger så mye blod med tanke på størrelsen. Dette gjør at nyrene også har en enorm tilførsel av oksygen, noe som er langt over deres metabolske behov. Dette ekstra oksygenet kan blant annet benyttes i reabsorbsjonsprosessene som beskrives mer i detalj i neste artikkel. Det systemiske blodtrykket har en viss påvirkning på nyrenes blodgjennomstrømning, men nyrene har autoreguleringsmekanismer (mer om dette lenger nede) som gjør at denne holder seg noenlunde konstant over en variasjon i det systemiske blodtrykket mellom 80-170 mmHg. Dette er viktig for nyrenes evne til å kontrollere urinproduksjonen. Blodet kommer til nyrene gjennom nyrearterien, og inne i nyrene fordeler blodet seg gjennom mindre arterioler. Nefronene inneholder et langt rørstystem, nyretubuli, som er dekket av tubulære epitelceller. Vevet som omkranser tubuli kalles interstitium. Nefronene har også to kapillærnettverk som er tilknyttet nyretubuli, ordnet slik at det er mulig for nyrene å filtrere og reabsorbere store mengder væske og metabolitter.</p>
<p>Det første kapillære nettverket kalles glomerulus og ligger inne i Bowmans kapsel. Blodet fraktes til glomerulus gjennom den tilførende arteriolen, og videre gjennom den fraførende arteriolen. I glomerulus er det hydrostatiske trykket høyt, noe som presser væsken ut fra blodårene, over i Bowmans kapsel og deretter inn i proksimale tubuli som ligger i nyrebarken. Det andre kapillære nettverket består av peritubulære kapillærer. Her er det hydrostatiske trykket mye lavere, noe som muliggjør reabsorbsjon av væske og metabolitter som ikke skal skilles ut. Nyrene kan selv regulere trykket i glomerulus og de peritubulære kapillærene slik at filtrasjon og reabsorbsjon reguleres etter kroppens behov. Dette er ikke minst viktig ved store endringer i det systemiske blodtrykket, som ellers ville medført endringer i filtrasjonen.</p>
<p><img src="images/clipboard-4250494475.png" class="img-fluid">Glomerulus til venstre. Oversikt over nefron til høyre. (Proksimale tubuli i lyseblått, distale tubuli i grønt, samlerør i brunt)</p>
<p>Væsken som filtreres i glomerulus kalles råurinen. Denne fraktes gjennom proksimale tubuli og videre gjennom Henles sløyfe, som er et segment av tubuli som beveger seg ned i nyremargen og opp igjen til barken. Anatomisk skiller vi mellom den nedadstigende og oppadstigende delen av Henles sløyfe. Den nedadstigende og begynnelsen av den oppadstigende delen har tynne epitelvegger, og kalles derfor det tynne segmentet. Resten av den oppadstigende delen har tykkere epitelvegger og kalles det tykke segmentet.</p>
<p>På slutten av det tykke segmentet finner vi et felt med spesialiserte tubulære epitelceller som heter Macula Densa, som er viktig for å regulere nefronfunksjonen ved at de er i direkte kontakt med tilførende og fraførende arteriolene som fører blodet gjennom glomerulus. Etter Macula Densa kommer vi over i distale tubuli, som befinner seg i nyrebarken, som til slutt tømmes over i samlerøret. Distale tubuli er bekledd av to typer epitelceller, prinipalceller og interkalerte celler, som har ulike egenskaper. Samlerørene er dekket av kubeepitelceller.</p>
<p>Samlerørene fra flere nefroner slår seg sammen til større og større samlerør som går nedover i nyremargen og tømmer innholdet over i nyrebekkenet ved spissen av nyrepyramidene. Hver nyre har omtrent 250 store samlerør, og hver av disse samler urin fra omtrent 4000 nefroner.</p>
</section>
<section id="glomerulær-filtrasjonsrate" class="level2">
<h2 class="anchored" data-anchor-id="glomerulær-filtrasjonsrate">Glomerulær filtrasjonsrate</h2>
<p>Glomerulær filtrasjonsrate (GFR) er et mål på hvor mye blodplasma som filtreres gjennom glomerulus. GFR bestemmes av det hydrostatiske og osmotiske trykket på hver side av kapillærmembranen (filtrasjonstrykket) og filtrasjonskoeffisienten (K<sub>f</sub>), som er produktet av hvor stor filtrasjonsoverflaten er og dens permeabilitet. Det hydrostatiske trykket er høyere i kapillærene enn i tubuli, noe som fremmer filtrasjonen, mens det osmotiske trykket også er høyest i kapillærene og motvirker filtrasjon ved å holde væsken tilbake i blodårene. Permeabiliteten er høy. Til sammen gir dette en høy netto filtrasjon, og hele 20% av blodet som tilføres nyrene filtreres. Hos et gjennomsnittsmenneske gir dette en GFR på omtrent 125mL/min eller 180L/dag. Daglig variasjon i GFR skyldes normalt sett ikke endringer i K<sub>f</sub>, men justeringer av det hydrostatiske trykket i kapillærene ved å regulere motstanden i tilførende og fraførende arteriole.</p>
<blockquote class="blockquote">
<p><em>GFR = K<sub>f</sub> x netto filtrasjonstrykk</em></p>
</blockquote>
</section>
<section id="hvordan-gfr-reguleres" class="level2">
<h2 class="anchored" data-anchor-id="hvordan-gfr-reguleres">Hvordan GFR reguleres</h2>
<p>Når væske filtreres i glomerulus så vil det osmotiske trykket i blodårene øke (konsentrasjonen av osmotisk aktive metabolitter øker som følge av at væske føres over i nyretubuli), og dette reduserer GFR. Endringer i nyrenes blodtilførsel vil, dersom GFR er uendret, påvirke hvor stor andel av væsken som filtreres. Ved lav tilførsel vil en større andel filtreres og motsatt. Dette vil påvirke hvor stor endringen i det osmotiske trykket blir, som igjen vil gi en kompensatorisk endring i GFR. Dette gjør at en reduksjon i nyrenes blodtilførsel vil gi en reduksjon i GFR, som er en viktig tilpasning i en slik situasjon.</p>
<p>GFR reguleres også hormonelt, og det viktigste hormonet er angiotensin II. Den inaktive formen, angiotensinogen, produseres i leveren. Angiotensinogen må deretter aktiveres til angiotensin I i en prosess som styres av renin, et enzym som produseres i nyrenes juxtaglomerulære celler. Den videre omdanningen til angiotensinogen II skjer ved hjelp av angiotensinkonverterende enzym (ACE) som hovedsakelig produseres i lungene, men også i nyrene og blodkarene. Som følge av fall i blodtrykket eller blodvolumet vil det produseres angiotensin II, og effekten i nyrene er konstriksjon av fraførende arteriole. Prostaglandiner og nitrogenoksid motvirker konstriksjon av tilførende arteriole. Dette motvirker fallet i GFR som vi ellers ville fått ved redusert systemisk blodtrykk, samtidig som det øker reabsorbsjonen av elektrolytter fra nuretubuli. På denne måten er angiotensin II med å gjenopprette blodtrykk og blodvolum.</p>
<p>Hovedmekanismen for den fysiologiske reguleringen av GFR er imidlertid nyrenes regulering av det hydrostatiske trykket i glomerulus, som styres ved å endre motstanden i de tilførende og fraførende arteriolene. Konstriksjon av tilførende arteriole vil redusere blodtilførselen og dermed redusere det hydrostatiske trykket i glomerulus. Konstriksjon av fraførende arteriole vil gjøre at blodet i større grad holdes tilbake i glomerulus, og det hydrostatiske trykket øker. Dilatasjon av de samme blodårene vil gi motsatt effekt. Konstriksjon av fraførende arteriole vil også redusere total blodtilførsel til nyrene, så om konstriksjonen av de fraførende arteriolene blir for stor så vil den kompensatoriske økningen i det osmotiske trykket overgå økningen av det hydrostatiske trykket og gjøre at nettoeffekten blir redusert GFR. For å oppsummere så vil konstriksjon av tilførende arteriole redusere GFR mens effektene av konstriksjon av fraførende arteriole er avhengig av hvor kraftig konstriksjonen er. Disse autoreguleringsmekanismene gjør at GFR holder seg mer eller mindre uendret på tross av svingninger i det systemiske blodtrykket, noe som gjør at filtrasjon og reabsorbsjon av de ulike metabolittene fungerer normalt.</p>
<p>Macula Densa, de spesialiserte epitelcellene i overgangen mellom proksimale og distale tubuli, er veldig viktig for denne autoreguleringen. Disse cellene registrerer saltkonsentrasjonene i filtratet som passerer over i distale tubuli, og bruker denne informasjonen til å gi signaler som justerer GFR. Mekanismene for hvordan dette skjer er foreløpig ikke godt forstått, men de kan innebære både regulering av motstanden i arteriolene og frigjøring av hormonet renin som aktiverer angiotensin II. Det er viktig at saltkonsentrasjonene i distale tubuli er godt regulert, ettersom denne i stor grad påvirker hvor mye væske som skilles ut i urinen. Faktorer som øker eller reduserer reabsorbsjon av salter i proksimale tubuli vil påvirke konsentrasjonen som kommer til Macula Densa. Dersom konsentrasjonen er for høy eller lav, vil GFR reguleres for å rette opp i dette.</p>
<p>GFR er altså veldig høy og rimelig godt regulert. Den største fordelen med en høy GFR er at alt blodet filtreres gjennom nyrene veldig mange ganger daglig, noe som gir nyrene muligheten til å regulere urinproduksjonen veldig nøye etter kroppens behov.</p>
</section>
<section id="oppsummering" class="level2">
<h2 class="anchored" data-anchor-id="oppsummering">Oppsummering</h2>
<p>Nyrene er organene som produserer urin, og derfor veldig sentral i opprettholdelsen av væskebalansen og nivåene av ulike stoffer i blodet. Dette skjer ved at nyrene filtrerer blodet og skiller ut det som ikke skal være der. Derfor har nyrene en veldig høy tilførsel av blod, og hele blodvolumet filtreres mange ganger hver eneste dag.</p>
<p>De funksjonelle enhetene i nyrene heter nefroner, og det er i disse filtrasjonen av blodet skjer. Blodet fraktes til glomerulus der det filtreres over i nefronenes tubuli. Hvor mye som filtreres kalles glomerulær filtrasjonsrate. Det er viktig at den glomerulære filtrasjonsraten opprettholdes, og derfor er denne nøye regulert, først og fremst av nyrene selv.</p>
<p>Les også de neste artiklene om nyrene:</p>
<ul class="incremental">
<li><p><a href="../../artikler/fysiologi/nyre2.html" title="Nyrene del 2 – Urinproduksjon og væskebalanse">Nyrene del 2 – Væskebalanse og urinproduksjon</a></p></li>
<li><p><a href="../../artikler/fysiologi/nyre3.html" title="Nyrene del 3 – Elektrolyttstatus og andre funksjoner">Nyrene del 3 – Elektrolyttregulering og øvrige oppgaver</a></p></li>
<li><p><a href="../../artikler/fysiologi/nyre4.html" title="Nyrene del 4 – nyresykdom">Nyrene del 4 – Nyresykdom</a></p></li>
</ul>
<p>All informasjonen i denne artikkelen er basert på en lærebok i fysiologi (1). Artikkelen er ment å gi en oversikt, og jeg anbefaler interesserte å undersøke i faglitteratur for nærmere beskrivelse av detaljer.</p>
<p>Takk til Thomas Olsen for gjennomlesing og korreksjoner.</p>
<ol class="incremental" type="1">
<li>Guyton A, Hall J: <strong>Textbook of Medical Physiology</strong>, 12 edn: Saunders/Elsevier; 2011.</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>