<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vegard Lysne">
<meta name="dcterms.date" content="2013-08-08">

<title>Nyrene del 3: Elektrolyttstatus og andre funksjoner – Frisk og Funksjonell (arkiv)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Frisk og Funksjonell (arkiv)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../poster.html"> 
<span class="menu-text">Alle poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../naeringsstoffer.html"> 
<span class="menu-text">Næringsstoffene</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../metabolismen.html"> 
<span class="menu-text">Metabolismen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../fysiologi.html"> 
<span class="menu-text">Fysiologi</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../hormonsystemet.html"> 
<span class="menu-text">Hormoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kildekritikk.html"> 
<span class="menu-text">Kildekritikk</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kosthold-institusjoner.html"> 
<span class="menu-text">Kosthold i helseinstitusjoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../om.html"> 
<span class="menu-text">Om bloggen</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Nyrene del 3: Elektrolyttstatus og andre funksjoner</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Fysiologi</div>
                <div class="quarto-category">Nyre</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vegard Lysne </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 8, 2013</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><a href="../../fysiologi.html">Tilbake til artikkelserien om menneskets fysiologi</a></p>
<p>I <a href="../../artikler/fysiologi/nyre1.html" title="Nyrene del 1 – Oppbygging og glomerulær filtrasjonsrate">den første artikkelen om nyrene</a>&nbsp;gikk jeg gjennom nyrenes oppbygging og anatomi, samt glomerulær filtrasjonsrate (GFR). Deretter tok jeg i <a href="../../artikler/fysiologi/nyre2.html" title="Nyrene del 2 – Væskebalanse og urinproduksjon">den andre artikkelen</a> for meg dette med væskebalanse og hvordan nyrene regulerer denne ved å produsere urin.&nbsp; I denne artikkelen kommer jeg inn på hvordan nyrene regulerer utskillelsen og dermed blodkonsentrasjonene av de ulike elektrolyttene. Selv om filtrasjon av blodet og utskillelse av avfallsstoffer er nyrenes viktigste oppgave, har de også flere andre viktige funksjoner som jeg går igjennom i slutten av artikkelen.</p>
<section id="regulering-av-elektrolytter-i-blodet" class="level2">
<h2 class="anchored" data-anchor-id="regulering-av-elektrolytter-i-blodet">Regulering av elektrolytter i blodet</h2>
<p>I den andre artikkelen gikk jeg i dybden på hvordan nyrene produserer urin, og hvordan utskillelsen av væske og natrium reguleres. Dette er svært viktig, ettersom natrium også er sentralt når det kommer til å regulere konsentrasjonene av veldig mange andre molekyler. Inntaket av de ulike næringsstoffene varierer, og for å opprettholde riktig balanse må også utskillelsen av de enkelte molekylene reguleres hver for seg.</p>
<p>Natrium er viktig for aktiv reabsorbsjon og ekskresjon av en rekke metabolitter, så man skulle tro at endringer i natriumkonsentrasjonene ville påvirke utskillelsen av de andre. Heldigvis har vi en rekke hormoner som spesifikt påvirker reabsorbsjon og ekskresjon av ulike metabolitter, noe som gjør at nyrene kan regulere dette veldig godt. Her vil jeg gå inn på mekanismene som ligger til grunn for nyrenes regulering av kalium, kalsium, fosfat og magnesium, som alle er viktige mineraler i kroppen.</p>
<section id="kalium" class="level4">
<h4 class="anchored" data-anchor-id="kalium">Kalium</h4>
<p><a href="http://www.friskogfunksjonell.no/kalium/" title="Kalium">Kalium</a>&nbsp;er vår viktigste intracellulære elektrolytt, og ekstracellulær konsentrasjon er så liten at den raskt kan overskrides av kaliuminnholdet i et enkelt måltid. Det er ekstremt viktig at denne konsentrasjonen reguleres nøye, ettersom små avvik kan medføre store konsekvenser som først og fremst rammer hjertet. Denne konsentrasjonen reguleres først og fremst ved utskillelsen gjennom nyrene, og dette stiller store krav til nyrene om å hele tiden tilpasse utskillelsen slik at den står i forhold til variasjoner i inntaket. Som nevnt i artikkelen om kalium så reguleres blodkonsentrasjonen også i stor grad ved at Na/K-pumpen i alle celler pumper kalium inn i cellene i bytte mot natrium, og dette utgjør førstelinjeforsvaret mot små endringer i kaliumhomeostasen. Et overskudd av kalium i blodet vil raskt transporteres inn i cellene og holdes der til nyrene får skilt ut det overflødige. Transporten av kalium inn i cellene via Na/K-pumpen stimuleres av hormonene aldosteron, insulin og katekolaminene adrenalin/noradrenalin. Acidose vil øke konsentrasjonen av kalium i blodet, mens alkalose reduserer den. Mekanismene er ikke fullstendig kartlagt, men en av dem er via påvirkning på Na/K-pumpen.</p>
<p>Når det gjelder nyrenes utskillelse av kalium, så styres disse av de kjente prosessene filtrasjon, reabsorbsjon og ekskresjon. Filtrasjonsraten er normalt sett helt konstant, og reabsorbsjonen i proksimale tubuli er nesten fullstendig. Det meste styres med andre ord av sekresjonen, som foregår i distale tubuli og i samlerørene. I disse delene av tubuli kan kalium både reabsorberes og sekreres, avhengig av kroppens behov. Utskillelsen må matche inntaket, og dersom vi får i oss veldig mye kalium kan utskillelsen til og med overgå den mengden som blir filtrert, noe som vitner om svært effektive mekanismer.</p>
<p>Mekanismen for kaliumsekresjon i distale tubuli er todelt, og foregår i principalcellene. Først vil en Na/K-pumpe frakte kalium inn i epitelcellene i bytte mot natrium, som da reabsorberes. Deretter vil den høye kaliumkonsentrasjonen inne i cellene føre til at kalium diffunderer passivt over i tubuli som følge av en høy elektrokjemisk gradient. Ved kaliummangel kan de interkalerte epitelcellene bidra til reabsorbsjon av kalium, trolig i bytte mot hydrogenioner, men dette er normalt sett mindre viktig. Sekresjonen av kalium stimuleres av økte kaliumnivåer i blodet (øker sekresjonen ved å stimulere Na/K-pumpen, øke den elektrokjemiske gradienten og å stimulere aldosteron), økt aldosteronnivå (aktiverer Na/K-pumpen og øker samlerørenes permeabilitet for kalium)</p>
<p><img src="images/clipboard-1300182639.png" class="img-fluid"></p>
<p>Sekresjon av kalium (1)</p>
</section>
<section id="fosfat" class="level3">
<h3 class="anchored" data-anchor-id="fosfat">Fosfat</h3>
<p>Opphopning av <a href="http://www.friskogfunksjonell.no/fosfor/" title="Fosfor">fosfat</a>&nbsp;er en veldig vanlig konsekvens ved nyresvikt, og dette har som nevnt tidligere en del uheldige konsekvenser. Utskillelsen av fosfat kan enkelt og greit forklares med at nyrene har en viss transportmaksimum for reabsorbsjon av fosfat, og alt som filtreres som overskrider dette vil skilles ut. Dersom konsentrasjonene i blodet ikke er store nok til at vi fyller denne maksimale grensen, så reabsorberes alt, og mesteparten av dette reabsorberes i proksimale tubuli via en natrium-fosfat-kotransporter.</p>
<p>Fosfatutskillelsen reguleres hovedsakelig ved hjelp av to hormoner, som begge reduserer reabsorbsjonen og derfor øker utskillelsen. Det første hormonet er paratyroideahormon (PTH), som skilles ut som respons på synkende kalsiumkonsentrasjon i blodet. Ved å øke utskillelsen av fosfat øker frigjøringen av beinmineraler, og dermed øker nivåene av kalsium. Det andre hormonet er fibroblast vekstfaktor 23 (FGF-23), som produseres i beinvevet. Dette stimuleres direkte av økende fosfatkonsentrasjon.</p>
</section>
<section id="kalsium" class="level3">
<h3 class="anchored" data-anchor-id="kalsium">Kalsium</h3>
<p>I blodet finner vi <a href="http://www.friskogfunksjonell.no/kalsium/" title="Kalsium">kalsium</a>&nbsp;i tre ulike former. Den aktive formen er fritt, ionisert kalsium. I tillegg finner vi det bundet til plasmaproteiner eller anioner som fosfat/citrat. Konsentrasjonene av ionisert kalsium er nøye kontrollert, og hovedsakelig styres dette av de kalsiumregulerende hormonene PTH og kalsitonin fra biskjoldbruskkjertelen, som hhv øker og reduserer blodkonsentrasjonen. Avvik fra normalnivåene kan medføre problemer med signaloverføringen i nervecellene, som kan gi muskulære problemer. Endringer i blodets syre/base-status kan påvirke i hvor stor grad kalsium binder til de ulike plasmaproteinene, og dermed også konsentrasjonene av ionisk kalsium i blodet. Ved acidose vil mindre binde til proteiner og mer ionisk kalsium blir tilgjengelig. Ved alkalose skjer det motsatte, og konsentrasjonene av aktivt kalsium synker.</p>
<p>Utskillelsen av kalsium over nyrene styres av filtrasjon og reabsorbsjon. Det foregår ingen sekresjon av kalsium. Proteinbundet kalsium filtreres ikke i nyrene ettersom proteinene er for store til å trenge gjennom kapillærveggen i glomerulus, noe som gjør at bare om lag halvparten av kalsiumet vi har i blodet filtreres. Normalt sett vil så godt som alt sammen reabsorberes, men dette kan reguleres etter kroppens behov (som følge av inntak/absorbsjon i tarmen). I proksimale tubuli reabsorberes kalsium først og fremst paracellulært sammen med væske. I distale tubuli skjer reabsorbsjonen ved aktiv transport. Først transporteres kalsiumet inn i epitelcellene gjennom en kalsiumtransportkanal, og deretter fra epitelcellene og til blodet enten gjennom en energikrevende kalsiumtransporter eller i bytte mot natrium gjennom en Na/Ca-kotransporter.</p>
<p><img src="images/clipboard-3934193600.png" class="img-fluid"></p>
<p>Reabsorbsjon av kalsium (1)</p>
<p>Det er hovedsakelig PTH som regulerer (øker) den aktive reabsorbsjonen av kalsium. Den passive reabsorbsjonen i proksimale tubuli er ikke påvirket av PTH ettersom det foregår ved diffusjon sammen med væske, og avhenger mest av hvor stor reabsorbsjonen av væske er. Ved økt blodtrykk synker denne, og da vil også mer kalsium skilles ut. Ved lavt blodtrykk vil imidlertid kalsiumutskillelsen på grunn av samme mekanisme reduseres. Inntaket av salt vil på grunn av økt natriumutskillelse øke utskillelsen av kalsium, noe som er en grunn til å begrense saltinntaket. Metabolske syre/base-forstyrrelser vil også påvirke kalsiumreabsorbsjonen. Ved acidose (som reduserer binding til plasmaproteiner) vil reabsorbsjonen av kalsium i distale tubuli hemmes, slik at mer kalsium skilles ut i urinen. Det motsatte er tilfelle ved alkalose.</p>
</section>
<section id="magnesium" class="level3">
<h3 class="anchored" data-anchor-id="magnesium">Magnesium</h3>
<p>Mesteparten av <a href="http://www.friskogfunksjonell.no/magnesium/" title="Magnesium">magnesiumet</a> i kroppen er lagret i beinvevet eller lagret intracellulært, noe som gjør at bare en veldig liten del befinner seg i blodet, hvorav halvparten i tillegg er proteinbundet og derfor ikke filtreres i nyrene. Ettersom magnesium er svært viktig for en lang rekke prosesser er det viktig at nivåene i blodet reguleres nøye. Nyrene regulerer derfor magnesiumutskillelsen etter hvor stort opptaket fra tarmen er. Kapasiteten for å øke utskillelsen er stor, og den kan også reduseres til tilnærmet ingenting om inntaket er lavt. Hovedsakelig reabsorberes magnesium i proksimale tubuli og i Henles sløyfe.</p>
<p>Utskillelsen av magnesium økes ved økte plasmanivåer av magnesium eller kalsium og ved økt blodvolum/høyt blodtrykk.</p>
</section>
</section>
<section id="nyrenes-øvrige-oppgaver" class="level2">
<h2 class="anchored" data-anchor-id="nyrenes-øvrige-oppgaver">Nyrenes øvrige oppgaver</h2>
<p>Nyrenes øvrige oppgaver er varierte, men omhandler hovedsakelig å opprettholde homeostasen i kroppen.</p>
<ul class="incremental">
<li><strong>Regulering av blodtrykk</strong>
<ul class="incremental">
<li>Nyrene er viktige for langtidsreguleringen av blodtrykket, noe som hovedsakelig skjer ved å skille ut væske og salter i riktige mengder. På kort sikt påvirker nyrene blodtrykket ved å skille ut og aktivere hormoner som er med å regulere blodtrykket, som renin og angiotensin II.</li>
</ul></li>
<li><strong>Regulere syre/base-balansen</strong>
<ul class="incremental">
<li>Ved å aktivt skille ut syrer og baser fra blodet er nyrene, sammen med lungene, viktige for å opprettholde blodets fysiologiske pH. Nyrenes regulering omtales som metabolsk, mens lungenes bidrag omtales som respiratorisk. Nyrene er alene om å kunne skille ut svovel- eller fosforholdige syrer. Metabolske syre/base-forstyrrelser er en vanlig konsekvens av nyresvikt.</li>
</ul></li>
<li><strong>Regulerer produksjon av røde blodceller</strong>
<ul class="incremental">
<li>Nyrene produserer hormonet erytropoietin (EPO), som stimulerer beinmargen til å produsere røde blodceller. Normalt sett produserer nyrene så godt som all EPO som skilles ut i blodet, og anemi er en vanlig konsekvens ved nyresvikt.</li>
</ul></li>
<li><strong>Aktiverer D-vitamin</strong>
<ul class="incremental">
<li>I <a href="http://www.friskogfunksjonell.no/d-vitamin/" title="D-vitamin">artikkelen om D-vitamin</a> kan du lese at dette vitaminet krever to metabolske omdanninger for å produsere den aktive metabolitten. Den første omdanningen skjer i leveren, mens den andre skjer i nyrene. Dette er viktig for at D-vitamin skal kunne øke opptaket av kalsium som er viktig for beindannelsen. Også inaktiveringen av vitaminet skjer i nyrene, noe som er viktig for å kunne regulere effekten.</li>
</ul></li>
<li><strong>Degradering av peptidhormoner</strong>
<ul class="incremental">
<li>Degradering av noen hormoner, deriblant insulin, skjer i nyrene, noe som er viktig for å regulere effekten av disse.</li>
</ul></li>
<li><strong>Nyrene produserer glukose</strong>
<ul class="incremental">
<li><a href="http://www.friskogfunksjonell.no/leveren/" title="Leveren – metabolismens dirigent">Leveren</a> er det organet som i størst grad produserer glukose fra protein og fett dersom glukosetilførselen ikke dekker kroppens behov. Glukoneogenesen foregår også i nyrene, og under langvarig faste kan kapasiteten her komme opp mot leverens nivå.</li>
</ul></li>
</ul>
</section>
<section id="nyrene-er-fantastiske" class="level2">
<h2 class="anchored" data-anchor-id="nyrene-er-fantastiske">Nyrene er fantastiske</h2>
<p>I disse tre første artiklene om nyrene har du fått innblikk i det brede spekteret av oppgaver som utføres av nyrene, og du kan sannsynligvis tenke deg hvor mye som går galt på en gang dersom nyrene skulle slutte å fungere. I den neste og siste artikkelen kommer jeg inn på nyresvikt, hva som forårsaker det og hva konsekvensene av dette er.</p>
<p>Informasjonen i denne artikkelen er basert på lærebøker i fysiologi (1)&nbsp;og ernæring (2). Artikkelen er ment å gi en oversikt, og jeg anbefaler interesserte å undersøke i bøkene for nærmere beskrivelse av detaljer.</p>
<p>Takk til Thomas Olsen for gjennomlesing og innspill.</p>
<ol class="incremental" type="1">
<li><p>Guyton A, Hall J: <strong>Textbook of Medical Physiology</strong>, 12 edn: Saunders/Elsevier; 2011.</p></li>
<li><p>Erdman JW, Macdonald IA, Zeisel SH (eds.): <strong>Present Knowledge in Nutrition</strong>, 10 edn: Wiley-Blackwell; 2012.</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>