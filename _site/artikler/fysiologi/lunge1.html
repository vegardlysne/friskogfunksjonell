<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andreas Wahl Blomkvist">
<meta name="dcterms.date" content="2015-01-29">

<title>Alkohol – Frisk og Funksjonell (arkiv)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Frisk og Funksjonell (arkiv)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../artikler.html"> 
<span class="menu-text">Alle poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../naeringsstoffer.html"> 
<span class="menu-text">Næringsstoffene</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../metabolismen.html"> 
<span class="menu-text">Metabolismen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../fysiologi.html"> 
<span class="menu-text">Fysiologi</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../hormonsystemet.html"> 
<span class="menu-text">Hormoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kildekritikk.html"> 
<span class="menu-text">Kildekritikk</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kosthold-institusjoner.html"> 
<span class="menu-text">Kosthold i helseinstitusjoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../om.html"> 
<span class="menu-text">Om bloggen</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Alkohol</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Fysiologi</div>
                <div class="quarto-category">Lunge</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Andreas Wahl Blomkvist </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 29, 2015</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><a href="../../naeringsstoffer.html">Tilbake til artikkelserien om næringsstoffene</a></p>
<p>Lungene er pusteorganene våre, og i den første artikkelen om disse organene får du et innblikk i hvordan lungene og respirasjonssystemet er bygget opp og fungerer.</p>
<p>Artikkelen tilhører artikkelserien om&nbsp;<a href="http://www.friskogfunksjonell.no/menneskets-fysiologi/" title="Menneskets fysiologi">Menneskets fysiologi</a>.</p>
<section id="anatomisk-introduksjon" class="level2">
<h2 class="anchored" data-anchor-id="anatomisk-introduksjon">Anatomisk introduksjon</h2>
<p>Respirasjonsorganene består hovedsakelig av luftveier og lunger. Se bildet under&nbsp;for de forskjellige delene av luftveiene.</p>
<p><img src="images/clipboard-3196303768.png" class="img-fluid"></p>
<p>Lungene er to organer som ligger på hver sin side i brysthulen. De består av luftveiene som ligger inni dem, samt et elastisk vev imellom. Det elastiske vevet gjør at lungene kan ekspandere med luft, samt tømmes for luft. Lungene er strengt tatt ikke festet til brystveggen, men er omgitt av en hinne vi kaller <em>pleurahinnen</em>. Denne hinnen har to kontinuerlige lag som dekker brysthulen og lungene. Imellom disse hinnene er det et lag med tynn væske som klistrer hinnene sammen og som muliggjør en glidebevegelse mellom dem.</p>
</section>
<section id="fysiologisk-funksjon" class="level2">
<h2 class="anchored" data-anchor-id="fysiologisk-funksjon">Fysiologisk funksjon</h2>
<p>Respirasjonssystemet har flere oppgaver:</p>
<ul>
<li>Ventilasjon: utveksling av luft mellom lungene og luften rundt oss</li>
<li>Gassutveksling mellom blod og luft</li>
<li>Transport av oksygen og karbondioksid mellom lunger og annet vev</li>
</ul>
<p>Samtidig må respirasjonssystemet regulere ventilasjonen for å tilpasse organismens behov og opprettholde <a href="../../artikler/fysiologi/homeostase.html">homeostase</a>. I denne artikkelen vil du lære om ventilasjon og gassutveksling. I andre del tar jeg for meg transport av oksygen og karbondioksid, samt regulering av ventilasjon.</p>
</section>
<section id="ventilasjon" class="level2">
<h2 class="anchored" data-anchor-id="ventilasjon">Ventilasjon</h2>
<p>Ventilasjon oppnås i hvile ved at <em>diafragma</em> trekker seg sammen og dermed trekker lungene nedover. Dette øker volumet og senker trykket i brysthulen. Trykkforskjellen som oppstår trekker luft inn i lungene fra omgivelsene, som i praksis vil si luften vi puster inn. Deretter avslapper diafragma, og lungene sin elastiske kraft trekker lungene sammen og senker volumet (og dermed øker trykket). Den nye trykkforskjellen dytter luft ut av lungene.</p>
<p>Den første fasen omtales som <em>inspirasjon</em> (innpust)<em>,</em> og er en <em>aktiv prosess</em> fordi det krever muskelsammentrekninger. Den andre fasen kalles <em>ekspirasjon</em> (utpust) og er i hvile en <em>passiv prosess</em> fordi den hovedsakelig oppnås ved at det elastiske krefter i lungene trekker lungene og diafragma til den opprinnelige posisjonen. Dette illustreres på figuren under.</p>
<p><img src="images/clipboard-718702097.png" class="img-fluid"></p>
<p>Bilde: Guyton&amp;Hall Textbook of Medical Physiology</p>
<p>Ved fysisk belastning eller sykdom kan kroppen ha behov for mer gassutveksling enn i hvile, fordi behovet for å tilføre oksygen og å kvitte seg med karbondioksid øker. Kroppen krever derfor hurtigere og dypere ventilasjon. Først og fremst blir ekspirasjonen kortere ved at muskler, hovedsakelig <em>abdominal recti</em>, bidrar til å øke trykket i brysthulen. Samtidig kan andre muskler rekrutteres i inspirasjon, for eksempel interkostalmusklene, som ligger mellom ribbena.</p>
<p>Det kan være interessant å bemerke seg at ved normal rolig ventilasjon bruker kroppen bare 3-5% av det totale energiforbruket til ventilasjon. Under sterk fysisk belastning kan imidlertid mengden energi som behøves for å opprettholde ventilasjonen øke med en faktor på 50. Således kan behovet for muskelenergi til respirasjon være en begrensende faktor for intensiteten til trening og lignende.</p>
</section>
<section id="volum-og-kapasitet" class="level2">
<h2 class="anchored" data-anchor-id="volum-og-kapasitet">Volum og kapasitet</h2>
<p>Ved å ta til følge hvor ofte man puster inn og ut i løpet av et minutt (<em>respirasjonsfrekvens</em>) kan man også regne ut minuttvolumet (<em>minute respiratory volume</em>,MRV) – som er mengden luft som inngår i ventilasjon per minutt. Siden vi puster gjennomsnittlig 12-16 ganger i minuttet, og vi utveksler ca. 500 ml luft hver gang (<em>tidevolum</em>), er MRV mellom 6 til 8 L/min. Vi kan, i hvert fall i teorien, puste 40-50 ganger hvert minutt og utveksle langt mer luft enn 500 ml. Mengden luft vi maksimalt kan puste inn og ut kalles vitalkapasiteten (<em>vital capacity)</em> og er ca. 4,6 L. Dette gir oss en maksimal MRV på <em>mer enn 200 L/min!</em> De aller fleste mennesker, især utrente, kan ikke opprettholde halvparten av denne kapasiteten for lenger enn 1 minutt.</p>
</section>
<section id="gassutveksling" class="level2">
<h2 class="anchored" data-anchor-id="gassutveksling">Gassutveksling</h2>
<p>Gassutvekslingen foregår i de omtrent 300 millioner alveolene. Alveoler ser ut som små luftblærer, og det er dit luftveiene leder til. Disse luftblærene har et tett nettverk av kapillærer som dekker overflaten (se bildet under). Oksygen, ved hjelp av diffusjon, beveger seg fra luften i alveolene til kapillærene, mens karbondioksid beveger seg fra kapillærene og ut til alveolene.</p>
<p><img src="images/clipboard-480104468.png" class="img-fluid">http://s1304.photobucket.com/user/sarahlynn244/media/Anatomy%20142/AlveolitheRespiratoryMembrane2_zps9b813ff5.png.html</p>
<p>For å forstå gassutveksling må man også vite litt om elementær fysikk relatert til gasser.</p>
<blockquote class="blockquote">
<p><strong>Fysikk: diffusjon, partialtrykk, oppløst gass i væske</strong></p>
<p><em>Diffusjon</em> er tilfeldig bevegelse av små molekyler. Så fremt bevegelsen er tilfeldig, så vil molekylene <em>i gjennomsnitt</em> bevege seg fra områder med høy konsentrasjon til områder med lav konsentrasjon. Konsentrasjonen av gassmolekyler i luft er direkte proporsjonal med <em>trykket</em> disse gassmolekylene utgjør. Lufttrykket på sjø nivå er rundt 760 mm Hg, og siden det er ca. 21% oksygen, så utgjør dette 160 mm Hg av trykket. Vi kaller dette trykket for <em>partialtrykket</em> til oksygen i luft og vi benevner dette med <em>pO<sub>2</sub>.</em></p>
<p>I væske, som i blodet, er gassene <em>oppløst</em> og dermed er ikke partialtrykket bare bestemt av konsentrasjonen, men også av <em>oppløselighetskoeffisienten</em>. Dette er en verdi som forteller oss hvor lett en gass løses opp i en væske, og som igjen bestemmes av hvor tiltrukket gassmolekylene er til vannmolekylene. Oksygen er omtrent 20 ganger <em>mindre</em> løselig enn CO<sub>2</sub>.</p>
<p>Vi kan for alle praktiske formål si at det er <em>forskjellen</em> i partialtrykket, samt <em>løseligheten</em>, til en gass som bestemmer hastigheten for gassutveksling. En gass vil gå fra et område med høyere partialtrykk til et område med lavere partialtrykk.</p>
</blockquote>
</section>
<section id="respirasjonsmembranen-og-hastigheten-for-utveksling-av-gasser" class="level2">
<h2 class="anchored" data-anchor-id="respirasjonsmembranen-og-hastigheten-for-utveksling-av-gasser">Respirasjonsmembranen og hastigheten for utveksling av gasser</h2>
<p>CO<sub>2</sub> og O<sub>2</sub> fraktes til og fra vev i de røde blodcellene (<em>erytrocytter</em>). Respirasjonsmembranen er membranen som skiller erytrocyttene fra alveolene (figur 2). Denne varierer i tykkelse, men kan være ekstremt tynn (1 mm) og vil minimalt bestå av: alveolar epitelcelle (også kalt Type 1 pneumocytt), sammenslått basal membran (tynt lag av ekstracellulært vev) og endotelcellene (cellene som utgjør blodårene).</p>
<p>På grunn av at luften i alveolen er fuktet, så er pO<sub>2</sub> i alveolene på omtrent 104 mm Hg (ikke 160 mm Hg). I oksygenfattig blod er denne verdien omtrent 40 mm Hg. På grunn av denne forskjellen vil oksygengass diffundere fra alveolene til blodet til trykket er likt. Dette skjer vanligvis ganske raskt, og omtrent 20 ganger raskere for CO<sub>2</sub>, slik at idet kapillærene forlater overflaten på alveolen har de et pO<sub>2</sub> på nesten 104 mm Hg.</p>
<p>For CO<sub>2</sub> skjer omtrent det samme, men motsatt. I den oksygenfattige enden av kapillærene er pCO<sub>2</sub> på omtrent 45 mm Hg, mens pCO<sub>2</sub> i alveolen er omtrent 40 mm Hg. Dermed trekkes det CO<sub>2</sub> ut av blodet til trykket utlignes på 40 mm Hg.&nbsp;I hvile utveksles det ca. 250 ml O<sub>2</sub>/min inn i blodet og ca. 200 ml CO<sub>2</sub>/min ut av blodet. Forskjellen mellom disse verdiene kan fortelle oss om du har forbrent karbohydrater eller fett!</p>
<blockquote class="blockquote">
<p><strong>Maksimalt oksygenopptak – et godt mål for kondisjon</strong></p>
<p>I respirasjonsfysiologi omtales <em>diffusjonskapasitet</em> for oksygen og karbondioksid som et mål for hvor mye gass respirasjonsmembranen kan utveksle i volum. I treningslære bruker man heller maksimalt oksygenopptak som er uttrykt med antall ml O<sub>2</sub> per kilo kroppsvekt per minutt. Denne verdien er i gjennomsnitt ca. 35 hos kvinner og 45 hos menn. Med trening kan vi forbedre oksygenopptaket til å bli nesten det dobbelte.</p>
<p>Til sammenligning har en 75 kilos mann et gjennomsnittlig oksygenopptak <em>i hvile</em> på 3,3 ml O<sub>2</sub>/kg/min. Hos godt trente menn kan altså opptaket øke 25-ganger i fysisk aktivitet sammenlignet med i hvile.</p>
</blockquote>
</section>
<section id="oppsummering" class="level2">
<h2 class="anchored" data-anchor-id="oppsummering">Oppsummering</h2>
<p>Lungene er respirasjonssystemets hovedorganer, og funksjonen til dette systemet er å opprettholde kroppens homeostase av gasser via (1) ventilasjon, (2) gassutveksling og (3) transport av oksygen og karbondioksid til og fra lungene. Ventilasjon er en prosess der muskler forandrer trykket i luftveiene slik at luft kommer inn og ut til alveolene der gassutvekslingen skjer. Gassutvekslingen er en prosess der spesialiserte strukturer – alveoler – muliggjør utveksling av oksygen og karbondioksid mellom lungene og blodet. Det er forskjellen i partialtrykket til en gass som avgjør hvor gassen går. Partialtrykket til en gass i væske vil variere med løseligheten til denne gassen.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>