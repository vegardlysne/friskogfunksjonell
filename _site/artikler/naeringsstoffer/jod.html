<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vegard">
<meta name="dcterms.date" content="2011-11-09">

<title>Jod – Frisk og Funksjonell (arkiv)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Frisk og Funksjonell (arkiv)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../poster.html"> 
<span class="menu-text">Alle poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../naeringsstoffer.html"> 
<span class="menu-text">Næringsstoffene</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../metabolismen.html"> 
<span class="menu-text">Metabolismen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../fysiologi.html"> 
<span class="menu-text">Fysiologi</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../hormonsystemet.html"> 
<span class="menu-text">Hormoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../om.html"> 
<span class="menu-text">Om bloggen</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Jod</h1>
  <div class="quarto-categories">
    <div class="quarto-category">næringsstoffene</div>
    <div class="quarto-category">mineraler</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Vegard </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 9, 2011</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><a href="../../naeringsstoffer.html">Tilbake til artikkelserien om næringsstoffene</a></p>
<p>Jod har atomnummer 53, og regnes som et sporelement. Mineralet er svært ujevnt utbredt i jorden på grunn av blant annet isbreer oversvømmelser, og derfor finner vi mest av det i sjøen. I naturen foreligger jod vanligvis som jodid (I-) eller jodat (IO3-), og finnes hovedsakelig som bestanddel i uorganiske salter.&nbsp;Globalt er det antatt at nesten to milliarder individer får i seg for lite jod, først og fremst i fattige land men også i den vestlige verden. I kroppen er jod viktig som bestanddel i stoffskiftehormonene våre som produseres i skjoldbruskkjertelen (tyroidea), og det er i tillegg svært viktig for mental utvikling.</p>
<section id="opptak-og-metabolisme" class="level2">
<h2 class="anchored" data-anchor-id="opptak-og-metabolisme">Opptak og metabolisme</h2>
<p>Jod fra maten brytes hovedsakelig ned til jodid i magen før det absorberes til blodet. Mesteparten av jodet absorberes helt øverst i tynntarmen via en kotransporter som transporterer jod sammen med <a href="http://www.friskogfunksjonell.no/natrium-og-klor/" title="Natrium og klor">natrium</a>&nbsp;(Na/I-symport) inn i tarmcellene. Jod transporteres så over i blodet, og herfra vil det enten tas opp i skjoldbruskkjertelen via en tilsvarende Na/I-symport som vi fant i tarmene, eller skilles ut over nyrene. Urinutskillelsen er ganske stabil, men hvor stor andel som tas opp i skjoldbruskkjertelen vil variere med inntaket. Jo mer vi spiser jo mindre andel tas opp her, og ved tilstrekkelig inntak vil under 10% gå denne veien. Ved utilstrekkelig inntak vil imidlertid mesteparten kunne havne her.&nbsp;I blodet er halvveringstiden for jod omtrent 10 timer, noe som betyr at vi trenger tilførsel med jevne mellomrom for å unngå mangel.</p>
<p>En gjennomsnittlig voksen person har omtrent 20mg jod lagret i kroppen, hvorav mesteparten befinner seg i skjoldbruskkjertelen. Hver dag absorberer skjoldbruskkjertelen 60-80µg jod for å gjøre opp for det som tapes og kunne opprettholde syntesen av stoffskiftehormoner.</p>
<p>Inne i skjoldbruskkjertelen &nbsp;binder jod til et stort glykoprotein som heter tyroglobulin (Tg). I cellemembranen til kjertelcellene (tyrocyttene) har vi et enzym som heter tyroperoksidase (TPO), som sammen med hydrogenproksid oksiderer jodet slik at det kan binde til tyrosinresiduer på Tg. Da dannes det monojodotyrosin (MIT) og dijodotyrosin (DIT). MIT og DIT er forløperne for tyroideahormonene.</p>
<p>Tyroideahormonene trijodotyronin (T3) og tyroksin (T4) dannes ved at enzymet TPO katalyserer bindingen av hhv MIT+DIT (T3) eller DIT+DIT (T4). T3 og T4 er strukturelt like, men inneholder hhv 3 og 4 jodmolekyler. Alt dette skjer inne i selve skjoldbruskkjertelen, og de ferdige joderte forbindelsene lagres bundet til Tg. Når Tg så fraktes inn i tyrocyttene så vil proteaser (enzymer som fordøyer proteiner, her Tg) frigjøre de joderte forbindelsene og T3 og T4 fraktes ut i blodet. MIT og DIT vil dejodineres av en selenavhengig dejodinase, slik at jodet kan brukes på nytt.&nbsp;Produksjonen av T3 og T4 styres hormonelt. Mengden fritt T4 i sirkulasjonen styrer produksjonen av hormonet&nbsp;<a href="http://www.friskogfunksjonell.no/hypofysehormonene/" title="Hypofysehormonene">TSH</a>, tyroideastimulerende hormon, som produseres i hypofysen og stimulerer skjoldbruskkjertelen til å produsere hormoner.</p>
<p>Når T3 og T4 kommer ut i blodet binder de hovedsakelig til tyroksinbindende protein, men også til andre proteiner som albumin og transtyretin. Etter at hormonene er brukt så vil de brytes ned, og jodet blir igjen tilgjengelig for å enten absorberes av skjoldbruskkjertelen eller skilles ut over nyrene.</p>
</section>
<section id="funksjoner" class="level2">
<h2 class="anchored" data-anchor-id="funksjoner">Funksjoner</h2>
<p>Når T3 og T4 tas opp i målvevene, som hovedsakelig er lever, nyrer, hjerte, muskelvev, hypofysen og hjernen, dejodineres T4 slik at det dannes T3. Det er nemlig T3 som er det mest aktive hormonet. Tyroideahormonene regulerer et bredt spekter av fysiologiske funksjoner. På cellenivå virker de ved å binde til reseptorer i cellekjernen, og styrer hvilke gener som uttrykkes. Generelt sett promoterer T3 produksjon av enzymer og proteiner som øker den metabolske aktiviteten i den aktuelle cellen.</p>
<p>Den mest kjente funksjonen er at disse hormonene øker energimetabolismen, ved å øke varmeproduksjon og oksygenforbruket i cellene. I tillegg de med å opprettholde kjønnskjertlenes funksjon og dermed regulere reproduksjonsevnen. Ved å regulere produksjonen av veksthormoner er tyroideahormonene også sentrale for å regulere vekst og modning, både av vev og skjelett. Nervesystemet er også avhengig av disse hormonene, spesielt i de første levemånedene, og de er derfor også knyttet til utvikling.</p>
</section>
<section id="behov-og-anbefalinger" class="level2">
<h2 class="anchored" data-anchor-id="behov-og-anbefalinger">Behov og anbefalinger</h2>
<p>Behovet for jod er beregnet utifra risikoen for å utvikle struma. De norske anbefalingene for jod er i området 150µg/dag. Barn trenger mer jod per kg kroppsvekt enn voksne, pga et høyere stoffskifte.</p>
</section>
<section id="mangeltilstander" class="level2">
<h2 class="anchored" data-anchor-id="mangeltilstander">Mangeltilstander</h2>
<p>Globat sett er det beregnet av omtrent 2 milliarder mennesker får i seg utilstrekkelig med jod. Spesielt i områder der jorden av ulike årsaker inneholder lite jod er mangel utbredt. Dette inkluderer områder i sentral-Asia, Afrika, Nordvest-Amerika og sentral- og øst-Europa. I områder der jodmangel er utbredt vil det fortsette å være slik helt til jod innføres i kosten, enten ved beriking eller introduksjon av nye matvarer som er produsert i andre områder.&nbsp;Det er mange konsekvenser av jodmangel, og med en fellesbetegnelse kalles disse IDD (Iodine deficiency disorders).</p>
<p>Det tydeligste symptomet på jodmangel er struma, som er en samlebetegnelse på tilstander som gir forstørret skjoldbruskkjertel. Ved mangel på jod, vil mengden T4 i sirkulasjonen reduseres. Dette øker utskillelsen av TSH fra hypofysen, som deretter stimulerer skjoldbruskkjertelen til å lage mer hormon. Pga utlistrekkelige mengder jod, kan ikke kjertelen produsere hormonet. I stedet stimuleres cellene til økt celledeling, og kjertelen vokser. Hovedproblemet med en forstørret skjoldbruskkjertel er at den kan legge press på andre strukturer i halsområdet, som luft- og spiserøret, samt at den kan skade nerver i området. Når tyroideafolliklene etterhvert slår seg sammen kalles det for nodulær struma.</p>
<p>Tyroideahormonene er nødvendig for normal utvikling av sentralnervesystemet. Tilstrekkelige mengder hormon er viktig for myeliniseringen av nervecellene,&nbsp; og en mangel tidlig i livet kan gi alvorlige, mentale skader. Kretinisme er en alvorlig mental lidelse som skyldes jodmangel i denne perioden, og kjennetegnes ved tap av hørsel og tale, kortvoksthet, kramper/spasmer og kraftig mental retardasjon.</p>
<p>Graviditet fører til et økt stress på morens skjoldbruskkjertel, da hun må produsere tyroideahormoner både til seg selv og til fosteret. Mangel på jod kan derfor skape problemer både på mor og foster. Alvorlig mangel under graviditet kan gi økt forekomst av dødfødsler, aborter eller barn med medfødte misdannelser. Spermieproduksjonen og normal menstruasjonssyklus er også avhengig av normal produksjon av tyroideahormoner, og både redusert og økt produksjon av disse hormonene kan forstyrre disse systemene.</p>
<p>Hypotyreose, eller lavt stoffskifte som det ofte betegnes som, kjennetegnes ved for lav produksjon av tyroideahormoner og har mange konsekvenser. Symptomer som at man føler seg trøtt og tiltaksløs, fryser lett, er deprimert og ukonsentrert, og opplever hukommelsessvikt er vanlig. Kroppsvekten vil vanligvis øke, samtidig som man får smerter i ledd, humørsvingninger og søvnproblemer.</p>
<p>Mangel på andre næringsstoffer kan forverre en jodmangel. Mangel på <a href="http://www.friskogfunksjonell.no/selen/" title="Selen">selen</a> vil redusere kroppens antioksidantkapasitet, og reaktive oksygenforbindelser kan skade skjoldbruskkjertelen. Dejodinaseenzymene er også avhengig av selen, og derfor kan produksjonen av tyroideahormoner reduseres ved mangel. <a href="http://www.friskogfunksjonell.no/jern/" title="Jern">Jernmangel</a> reduserer aktiviteten i det jernavhengige tyroperoksidaseenzymet som er viktig for produksjon av tyroideahormonene. Mangel på <a href="http://www.friskogfunksjonell.no/a-vitamin/" title="A-vitamin">A-vitamin</a>&nbsp;kan øke aktiviteten til TSH dersom man har jodmangel, noe som øker risikoen for å utvikle struma.</p>
</section>
<section id="kan-vi-få-for-mye" class="level2">
<h2 class="anchored" data-anchor-id="kan-vi-få-for-mye">Kan vi få for mye?</h2>
<p>For stort inntak av jod kan gi hypertyreose, men høyt inntak gir langt mindre skade enn et utilstrekkelig inntak vil gjøre, og vi tåler ganske store mengder før det gir betydelige skader. Hypertyreose kjennetegnes ved et økt stoffskifte, og symptomer på dette kan blant annet være hjertebank og hurtig puls, økt kroppsvarme, svetting, irritabilitet, vekttap til tross for økt appetitt, søvnforstyrrelser og muskelsvakhet.</p>
<p>Hos folk med tilstrekkelig jodstatus kan høyt inntak føre til det som kalles subklinisk hypotyreose. Dette skyldes at stort overskudd av jod hindrer produksjonen av&nbsp;tyroideahormoner, ved å blokkere koblingen av MIT til Tg. Frigjøringen av hormon fra skjoldbruskkjertelen kan også blokkeres. Som et resultat får vi en redusert produksjon av tyroideahormoner, noe som gir økt TSH, som igjen stimulerer til cellevekst i skjoldbruskkjertelen. Dette kan også ramme nyfødte dersom mor har hatt et veldig høyt inntak.</p>
<p>Høyt jodinntak kan også føre til hypertyroidisme. Ved struma, og da spesielt nodulær struma, kan tyrocyttene bli mindre sensitive for TSH sine signaler. Dersom man da over tid tilfører mye jod, så kan produksjonen av tyroideahormoner øke så mye at vi utvikler hypertyroidisme. Dette kan være spesielt farlig dersom man har underliggende hjertesykdom, da det i verste fall kan være dødelig.</p>
<p>Akkutt jodforgiftning gir magesmerter, diaré, kvalme, oppkast og hodepine, samt i alvorlige tilfeller kardiovaskulære symptomer og koma. De fleste tåler imidlertid ganske store doser godt.</p>
</section>
<section id="gode-kilder" class="level2">
<h2 class="anchored" data-anchor-id="gode-kilder">Gode kilder</h2>
<p>Gode kilder til jod er sjømat, meieriprodukter og salt som er beriket med jod, f.eks. JOZO salt. Sjpmat inneholder jevnt over mer jod ettersom sjøen er spesielt rik på mineralet.</p>
<p><em>Artikkelen er sist oppdatert juli 2013</em></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>