<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vegard">
<meta name="dcterms.date" content="2011-11-02">

<title>Fosfor – Frisk og Funksjonell (arkiv)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Frisk og Funksjonell (arkiv)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../poster.html"> 
<span class="menu-text">Alle poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../naeringsstoffer.html"> 
<span class="menu-text">Næringsstoffene</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../metabolismen.html"> 
<span class="menu-text">Metabolismen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../fysiologi.html"> 
<span class="menu-text">Fysiologi</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../hormonsystemet.html"> 
<span class="menu-text">Hormoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kildekritikk.html"> 
<span class="menu-text">Kildekritikk</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kosthold-institusjoner.html"> 
<span class="menu-text">Kosthold i helseinstitusjoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../om.html"> 
<span class="menu-text">Om bloggen</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Fosfor</h1>
  <div class="quarto-categories">
    <div class="quarto-category">næringsstoffene</div>
    <div class="quarto-category">mineraler</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Vegard </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 2, 2011</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><a href="../../naeringsstoffer.html">Tilbake til artikkelserien om næringsstoffene</a></p>
<p>Fosfor har atomnummer 15, og symbolet P. Fosfor har veldig mange viktige funksjoner, og inngår i mange fosfatholdige molekyler, blant annet i energimolekylet ATP. Det modne beinmineralet hydroksyapatitt inneholder også fosfat, som dermed også er viktig for god beinhelse.&nbsp;En person på 70kg har omtrent 700g fosfor lagret i kroppen, hvorav 85% finnes i beinvev og ca 10% i skjelettmusklene. Resten finnes inni andre celler, og sirkulerende i blodet. Fosfor er det mest utbredte anionet (negativt ladet ion) intracellulært, og finnes hovedsakelig som organiske, fosfatholdige molekyler som kreatinfosfat og ATP. I blodet er fosfatholdige molekyler, som H<sub>2</sub>PO<sub>4</sub><sup>-</sup>, med å regulere syre-base-balansen.</p>
<section id="opptak-og-metabolisme" class="level2">
<h2 class="anchored" data-anchor-id="opptak-og-metabolisme">Opptak og metabolisme</h2>
<p>Mesteparten av fosforet vi får i oss hydrolyseres raskt av fosfataser i tarmen, slik at det blir frigjort inorganisk fosfat (Pi). Det er først og fremst Pi som absorberes, og mesteparten av opptaket skjer i jejunum. Opptaket skjer ved aktiv transport via et kotransportprotein som absorberer fosfor sammen med <a href="http://www.friskogfunksjonell.no/natrium-og-klor/" title="Natrium og klor">natrium</a>, samt passiv, paracellulær diffusjon. Jevnt over tar vi opp rundt 65% av all fosforen vi får i oss. Det har tidligere vært antatt at <a href="http://www.friskogfunksjonell.no/d-vitamin/" title="D-vitamin">D-vitamin</a> spiller en viktig rolle i reguleringen av opptaket, men selv om mekanismene for at dette er tilfelle er kartlagt, er det uklart hvorvidt dette har en reell effekt. Det som først og fremst er grunnen til at fosfor ikke absorberes er at det danner komplekser med <a href="http://www.friskogfunksjonell.no/kalsium/" title="Kalsium">kalsium</a> som spises samtidig. D-vitamin stimulerer absorbsjonen av kalsium, og på denne måten blir det mindre kalsium igjen til å binde fosfat, noe som kan være årsaken til at man har observert at opptaket av fosfat øker ved høyere nivåer av aktivt D-vitamin.</p>
<p>Mesteparten av fosfatet i kroppen finner vi i beinvevet som en bestanddel i det modne beinmineralet hydroksyapatitt. Resten fordeler seg intracellulært (mye i muskelvev) og ekstracellulært. I ekstracellulærvæsken finner vi P<sub>i</sub>, hovedsakelig i form av bufferne H<sub>2</sub>PO<sub>4</sub><sup>-</sup> og HPO<sub>4</sub><sup>2-</sup> som er viktig for å regulere blodets pH. Konsentrasjonene av P<sub>i</sub>([P<sub>i</sub>]) nøye regulert, noe som er veldig viktig. Dette er spesielt viktig med tanke på at fosfat og kalsium kan gå sammen og danne krystaller som kan avleires i vev, noe som omtales som kalsifisering. Det viktigste i denne sammenhengen er kalsiumfosfatproduktet (Ca x P). Normalt sett er ikke Ca x P høyt nok til at disse krystallene utfelles, mens hydroksyapatitt krever lavere konsentrasjoner. Derfor vil det under normale omstendigheter bli dannet hydroksyapatitt, men ikke kalsiumfosfatkrystaller, noe som skjer dersom Ca x P øker til omtrent dobbel verdi. Kalsium er veldig godt regulert i blodet, så endringer i Ca x P skjer hovedsakelig via endringer i&nbsp;[P<sub>i</sub>].</p>
<p>[P<sub>i</sub>] reguleres først og fremst ved å endre nyrenes reabsorbsjon og dermed hvor mye som skilles ut i urinen. Maksimal kapasitet for å reabsorbere fosfat kalles tubulær maksimum for fosfat (TmP). De to viktigste faktorene som er involvert i reguleringen av&nbsp;[P<sub>i</sub>] er paratyroideahormon (PTH) fra biskjoldbruskkjertelen og fibroblast vekstfaktor 23 (FGF-23) som produseres i beinvevet. Begge disse vil nedregulere TmP og dermed øke utskilelsen av&nbsp;P<sub>i</sub>. Mens PTH først og fremst stimuleres av reduserte blodkonsentrasjoner av kalsium, så stimuleres FGF-23 direkte av&nbsp;[P<sub>i</sub>]. Når&nbsp;[P<sub>i</sub>] øker, noe som kan skje som følge av høyt inntak eller redusert utskillelse, øker produksjonen av FGF-23, noe som øker utskillelsen av fosfat. Så langt har vi at redusert kalsium eller økt fosfat vil stimulere til økt utskillelse av fosfat over nyrene. FGF-23 er mekanismen som kontrolleres direkte av fosfatnivåene.</p>
<p>FGF-23 reduserer også produksjonen av aktivt D-vitamin i nyrene. Dette kan redusere opptaket av fosfat som følge av redusert kalsiumopptak og dermed utfelling av uabsorberbart kalsiumfosfat i tarmen. Lav [P<sub>i</sub>] vil på den andre siden stimulere produksjonen av aktivt D-vitamin, noe som øker opptaket av kalsium og dermed fosfat. FGF-23 vil altså i tillegg til å øke utskillelsen av fosfat også redusere opptaket. Her skiller den seg fra PTH som vil stimulere opptaket av både kalsium og fosfat. Det som er felles for disse to er altså effektene på utskillelsen av fosfat.</p>
<p>Fosfat transporteres også fra tarmcellene og ut igjen i tarmen, sannsynligvis først og fremst som følge av at tarmcellene dør. Denne fosforen kan enten reabsorberes eller skilles ut i avføringen. Normalt taper vi imidlertid fosfor først og fremst via urinen, og utskillelsen her vil normalt sett tilsvare netto opptak fra tarmen, slik at fosfatkonsentrasjonene i blodet holder seg stabile. Unntaket fra dette er dersom vi bygger eller reduserer kroppsvev, ettersom fosfor er en nødvendig byggesten for alle kroppens celler.</p>
</section>
<section id="funksjoner" class="level2">
<h2 class="anchored" data-anchor-id="funksjoner">Funksjoner</h2>
<p>Fosfor har mange viktige funksjoner i kroppen, og er et svært viktig element i alle kroppens celler. Her er en rask gjennomgang av de mest sentrale funksjonen:</p>
<ul class="incremental">
<li><p>Mineralet inngår i hydroksyapatitt, som er et strukturelement i beinvevet vårt, og er nødvendig for å opprettholde god beinhelse. Under vekst er det helt nødvendig med et tilstrekkelig inntak av fosfor for at skjelettet kan vokse. Deretter er tilstrekkelig inntak viktig for å opprettholde beinmassen. Dette er fordi&nbsp;[P<sub>i</sub>] medierer beinmassens respons på PTH, og for et gitt PTH-nivå så vil nedbrytningen av bein være større dersom&nbsp;[P<sub>i</sub>] er lav.</p></li>
<li><p>Fosfor har viktige strukturelle egenskaper som bestanddel i fosfolipidene, som er viktige bestanddeler i cellemembranene våre.</p></li>
<li><p>Fosfor er viktig i energimetabolismen. Energimolekylene ATP, GTP og kreatinfosfat inneholder fosfor, og det er avspalting av fosfatgruppene fra disse molekylene som frigir energi som cellene kan benytte seg av.</p>
<p><img src="images/clipboard-2785702931.png" class="img-fluid"></p></li>
<li><p>En del vitaminer, som f.eks. <a href="http://www.friskogfunksjonell.no/thiamin/" title="Thiamin, vitamin B1">thiamin</a> og <a href="http://www.friskogfunksjonell.no/b6/" title="Pyridoksin, vitamin B6">B6</a>, inneholder fosfor, som derfor er viktig for deres funksjoner.</p></li>
<li><p>Fosfor er viktig i enzymatiske prosesser. En del proteiner aktiveres/deaktiveres ved at det bindes en fosfatgruppe til proteinet, en såkalt fosforylering.</p>
<p><img src="images/clipboard-129853857.png" class="img-fluid"></p></li>
<li><p>Fosfor spiller også inn i reguleringen av syre-base-balansen, ved å inngå i molekyler som fungerer som buffere. Det viktigste av disse molekylene er H<sub>2</sub>PO<sub>4</sub><sup>-</sup>. Denne mekanismen er ikke så viktig for reguleringen av blodet, da andre buffersystemer finnes her, men i nyrene og intracellulært er den veldig viktig.</p></li>
<li><p>DNA/RNA inneholder fosfor, som dermed er viktig for oppbyggingen og stabiliteten til disse molekylene.</p></li>
</ul>
</section>
<section id="behov-og-anbefalinger" class="level2">
<h2 class="anchored" data-anchor-id="behov-og-anbefalinger">Behov og anbefalinger</h2>
<p>Behovet for fosfor styres av fosforbalansen i kroppen vår, og måles utifra hvor mye vi skiller ut gjennom avføring og over nyrene. Nivåene av fosfor er som nevnt godt regulert, og reabsorbsjon fra nyrene kan reguleres opp eller ned etter inntaket. Det må understrekes at et kosthold som inneholder tilstrekkelig med protein og kalsium automatisk også vil inneholde tilstrekkelig fosfor, noe som gjør at dette ikke er noe å tenke på for friske mennesker. Det er derimot en stor utfordring når man skal planlegge kostholdet til personer med nyresvikt som ofte må har kraftige restriksjoner på fosfatinntaket, siden det da er veldig vanskelig å komme i mål med andre næringsstoffer.</p>
<p>De norske anbefalingene ligger rundt 600mg/dag, noe høyere for gravide og ammende. Dette tilsvarer mengden vi får i oss fra ca 100g solsikkefrø, 100g jarlsbergost eller 250g kyllingfilet. I USA anbefales ungdom å få i seg 1250mg/dag, mens anbefalingene for voksne er nærmere de norske.</p>
</section>
<section id="mangeltilstander" class="level2">
<h2 class="anchored" data-anchor-id="mangeltilstander">Mangeltilstander</h2>
<p>Fosformangel manifesterer seg som lave fosfatnivåer i blodet, kalt hypofosfatemi. Ettersom mesteparten av fosfatet befinner seg ekstracellulært (ikke medregnet det som er lagret i beinvev) er de fleste vev avhengig av tilstrekkelig høye konsentrasjoner av fosfat i blodet. Hypofosfatemi fører derfor til metabolsk fosfatmangel, noe som hindrer normal cellefunksjon. Dette gir symptomer som vekttap, anemi, muskelsvakhet, smerter i beinvevet, rakitt og beinskjørhet, redusert motstandskraft mot infeksjoner, kribling i huden, forvirring og i verste fall kan det føre til død.</p>
<p>Hypofosfatemi kan være genetisk bestemt, og vi kjenner til genvarianter som øker fosfatutskillelsen både direkte og indirekte. Indirekte kan dette eksempelvis skyldes økt produksjon av FGF-23 eller defekter i D-vitaminmetabolismen som gir økt utskillelse av PTH.</p>
<p>Hypofosfatemi skyldes nesten aldri mangelfullt inntak av mineralet, men andre faktorer. Diaré, alkoholisme, malabsorbsjonstilstander eller D-vitaminmangel kan gi mangelfullt fosfatopptak i tarmen. Diabetisk ketoacidose eller andre organiske acidoser kan føre til en økt utskillelse av fosfor, mens noen nyresykdommer redusere TmP og dermed gi økt utskillelse.&nbsp;Etter perioder med underernæring kan man risikere å utvikle hypofosfatemi som en del av det som er kjent som reernæringssyndromet. Dette er antatt å skyldes at økt opptak av glukose til cellene for å erstatte energilagrene som gikk tapt som følge av underernæringen også fører til at fosfat absorberes sammen med glukosen. Fosfatet fjernes dermed raskt fra blodbanen, og det er i slike situasjoner viktig å holde kontinuerlig øye med fosfatkonsentrasjonene.</p>
</section>
<section id="kan-vi-få-for-mye" class="level2">
<h2 class="anchored" data-anchor-id="kan-vi-få-for-mye">Kan vi få for mye?</h2>
<p>Hyperfosfatemi skyldes i de fleste tilfeller nyresvikt, der utskillelsen av mineralet ikke fungerer. Dette er en stor utfordring, ettersom det er svært vanskelig å begrense fosfatinntaket tilstrekkelig uten å få for lite av andre næringsstoffer, deriblant protein og kalsium. Derfor er nyresviktpasienter avhengig av å enten benytte seg av fosfatbindere, som binder fosfat i tarmen og hindrer opptak, eller å jevnlig fjerne fosfat fra blodet gjennom dialyse.</p>
<p>Hovedproblemet med hyperfosfatemi er at Ca x P øker, noe som legger tilrette for kalsifisering av vev. Spesielt går dette ut over nyrer og hjerte, og kalsifisering av blodårer kan føre til hjertedød. Dette skjer veldig sjelden hos personer med friske nyrer, ettersom utskillelsen er godt regulert. I sjeldne tilfeller kan det likevel oppstå, eksempelvis ved D-vitaminforgiftning.</p>
</section>
<section id="biotilgjengelighet-og-gode-kilder" class="level2">
<h2 class="anchored" data-anchor-id="biotilgjengelighet-og-gode-kilder">Biotilgjengelighet og gode kilder</h2>
<p>Fosfor finnes i de fleste proteinrike matvarer, som kjøtt, fisk, sjømat og meieriprodukter. Vi finner også fosfor i kornprodukter, frukt, bær og grønnsaker. Fytat er et fosfatholdig antinæringsstoff, og dette fosforet tar vi ikke opp.</p>
<p>Biotilgjengeligheten er høyest i kjøtt og fisk. Melkeprotein (kasein) inneholder noen fosfopeptider som ikke lar seg bryte ned, og fytater fra kornprodukter binder til fosfor og andre mineraler og hindrer opptak. Det som først og fremst påvirker opptaket av fosfat er hvor mye kalsium som inntas samtidig, da kalsium og fosfat kan bindes i tarmen og danne salter som ikke absorberes. Dette er grunnen til at kalsiumsalter benyttes som fosfatbindere for å redusere fosforopptaket hos personer med nyresvikt.</p>
</section>
<section id="aktuelt-om-fosfor" class="level2">
<h2 class="anchored" data-anchor-id="aktuelt-om-fosfor">Aktuelt om fosfor</h2>
<ul class="incremental">
<li>Det er uttrykt bekymring for hvorvidt et økende fosforinntak fra prosessert mat og spesielt fosforholdige drikkevarer som brus kan representere et problem. Økt fosfatkonsentrasjon er satt i sammenheng med nyresvikt, hjertesykdom og beinhelse, men det er usikkert i hvor stor grad små økninger i fosfatkonsentrasjonene påvirker risikoen. <a href="http://www.ncbi.nlm.nih.gov/pubmed/23719553">En nylig publisert reviewartikkel</a> tar for seg denne problemstillingen.</li>
</ul>
<p><em>Artikkelen er sist oppdatert juli 2013</em></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>