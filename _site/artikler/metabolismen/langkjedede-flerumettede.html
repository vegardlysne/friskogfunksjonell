<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vegard Lysne">
<meta name="dcterms.date" content="2013-08-29">

<title>Langkjedede og umettede fettsyrer – Frisk og Funksjonell (arkiv)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Frisk og Funksjonell (arkiv)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../poster.html"> 
<span class="menu-text">Alle poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../naeringsstoffer.html"> 
<span class="menu-text">Næringsstoffene</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../metabolismen.html"> 
<span class="menu-text">Metabolismen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../fysiologi.html"> 
<span class="menu-text">Fysiologi</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../hormonsystemet.html"> 
<span class="menu-text">Hormoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kildekritikk.html"> 
<span class="menu-text">Kildekritikk</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../kosthold-institusjoner.html"> 
<span class="menu-text">Kosthold i helseinstitusjoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../om.html"> 
<span class="menu-text">Om bloggen</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Langkjedede og umettede fettsyrer</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Metabolismen</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vegard Lysne </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 29, 2013</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><a href="../../metabolismen.html">Tilbake til artikkelserien om metabolismen</a></p>
<p>Tidligere har vi sett på nedbrytning og syntese av fettsyrer, med hovedfokus på de mettede fettsyrene. Umettede fettsyrer er fettsyrer med en eller flere dobbeltbindinger i karbonkjeden, og inkluderer de essensielle flerumettede omega-3 og omega-6-fettsyrene. Disse kan vi ikke lage selv, og er derfor avhengig av å få de i oss gjennom maten vi spiser. Men, når de først kommer inn i kroppen har vi en rekke enzymer som sørger for at de kan metaboliseres videre. I denne artikkelen tar vi en titt på disse metabolske prosessene som omhandler forlenging og desaturering av fettsyrer.</p>
<p>Relevante artikler:</p>
<ul class="incremental">
<li><a href="http://www.friskogfunksjonell.no/fett/" title="Fett">Fett</a></li>
<li><a href="http://www.friskogfunksjonell.no/fettsyrenedbrytning/" title="Fettsyrenedbrytning – β-oksidasjon">Fettsyrenedbrytning</a></li>
<li><a href="http://www.friskogfunksjonell.no/fettsyresyntese/" title="Fettsyresyntese">Fettsyresyntese</a></li>
</ul>
<section id="umettede-fettsyrer" class="level2">
<h2 class="anchored" data-anchor-id="umettede-fettsyrer">Umettede fettsyrer</h2>
<p>Umettede fettsyrer er fettsyrer som har en eller flere dobbeltbindinger i karbonkjeden. Fettsyren er enumettet dersom den inneholder en dobbeltbinding og flerumettet dersom det er flere. De essensielle omega-3 og omega-6-fettsyrene hører til de flerumettede fettsyrene.</p>
<p>Karbonkjeden til en fettsyre har en karboksylgruppe i den ene enden og en metylgruppe i den andre. Enden med metylgruppen har fått navnet omega-enden, etter den siste bokstaven i det greske alfabetet, og dette har igjen gitt navn til de ulike fettsyregruppene, som klassifiseres etter hvor den første dobbeltbindingen befinner seg. Omega-3-fettsyrene har sin første dobbeltbinding på karbon nummer tre fra omegaenden, mens omega-6-fettsyrene har første dobbeltbinding på karbon nummer seks. Omega-9 har etter samme system sin første dobbeltbinding på karbon nummer ni.</p>
</section>
<section id="benevning" class="level2">
<h2 class="anchored" data-anchor-id="benevning">Benevning</h2>
<p>Fettsyrer benevnes ofte ved hjelp av en kode som inneholder informasjon om hvor mange karbonatomer det er i kjeden, hvor mange dobbeltbindinger det er og hvor den første dobbeltbindingen sitter fra omega-enden. Disse kodene gjør det enkelt å se hvilken type fettsyre det er snakk om. Det første tallet i koden representerer antallet karbonatomer i kjeden, som for omega-3-fettsyren eikosapentaensyre (EPA) er 20. Det neste tallet representerer antallet dobbeltbindinger, og EPA har fem av disse, og koden er derfor 20:5. Den siste informasjonen vi får er hvor den første dobbeltbindingen sitter fra omega-enden, og dette benevnes ved n-X, der X representerer dette karbonatomet. Den første dobbeltbindingen i EPA sitter på karbon nummer tre (omega-3), og den fullstendige koden blir derfor 20:5n-3. Under følger noen eksempler på koden for noen ulike fettsyrer.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 24%">
<col style="width: 18%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Navn</strong></td>
<td><strong>Lengde</strong></td>
<td><strong>Dobbeltbindinger</strong></td>
<td><strong>Type fettsyre</strong></td>
<td><strong>Kode</strong></td>
</tr>
<tr class="even">
<td>Palmitat</td>
<td>16</td>
<td>0</td>
<td>Mettet fettsyre</td>
<td>16:0</td>
</tr>
<tr class="odd">
<td>Oljesyre</td>
<td>18</td>
<td>1</td>
<td>Enumettet omega-9-fettsyre</td>
<td>18:1n-9</td>
</tr>
<tr class="even">
<td>Arakidonsyre</td>
<td>20</td>
<td>4</td>
<td>Flerumettet omega-6-fettsyre</td>
<td>20:4n-6</td>
</tr>
<tr class="odd">
<td>Dokosaheksaensyre</td>
<td>22</td>
<td>6</td>
<td>Flerumettet omega-3-fettsyre</td>
<td>22:6n-3</td>
</tr>
</tbody>
</table>
</section>
<section id="syntese-av-langkjedede-fettsyrer" class="level2">
<h2 class="anchored" data-anchor-id="syntese-av-langkjedede-fettsyrer">Syntese av langkjedede fettsyrer</h2>
<p>Hovedproduktet fra fettsyresyntesen er palmitat, som er en mettet fettsyre med 16 karboner i kjeden. Vi har imidlertid noen enzymer som kalles elongaser, som kan fortsette å koble på tokarbonenheter og dermed forlenge fettsyrene. Disse enzymene finner vi i cellenes cytoplasma, bundet til membranen som omslutter endoplasmatisk retikulum. Elongasene er ikke substratspesifikke, og kan dermed forlenge alle typer fettsyrer.</p>
</section>
<section id="syntese-av-umettede-fettsyrer" class="level2">
<h2 class="anchored" data-anchor-id="syntese-av-umettede-fettsyrer">Syntese av umettede fettsyrer</h2>
<p>En enzymgruppe som kalles desaturaser har den egenskapen at de kan sette inn dobbeltbindinger i fettsyrekjeden, og dermed produsere umettede fettsyrer. Disse er, som elongasene, bundet til endoplasmatisk retikulum i cellenes cytoplasma. De ulike desaturasene er spesifikke for hvor i fettsyrekjeden de kan sette inn dobbeltbindinger. Vi mennesker har ikke desaturaser som kan sette inn dobbeltbindinger tidligere enn karbon nummer syv, og dette forklarer hvorfor omega-3 og omega-6-fettsyrene er essensielle og må tilføres gjennom kostholdet.</p>
<p>Produksjonen av langkjedede flerumettede fettsyrer skjer ved vekselvis desaturering og elongering. Utgangspunktet for disse synteseveiene er palmitat (16:0), stearinsyre (18:0), linolensyre (LA, 18:2n-6) og alfalinolensyre (ALA, 18:3n-3).</p>
<p><img src="images/clipboard-3265827869.png" class="img-fluid"></p>
<p>D9-desaturase er et enzym som produserer henholdsvis omega-7-fettsyren palmitoleinsyre (16:2n-7) fra palmitat og omega-9-fettsyren oljesyre (18:1n-9) fra stearinsyre. Disse fettsyrene kan desatureres og elongeres videre for å gi opphav til flere omega-7 og omega-9-fettsyrer.</p>
<p>D6-desaturase er den desaturasen som er vist å regulere metabolismen av flerumettede fettsyrer. De viktigste substratene for dette enzymet er fettsyrene med 18 karbonatomer i kjeden, 18:1n-9, 18:2n-6 (LA) og 18:3n-3 (ALA). Dette er altså det første steget i metabolismen av de essensielle omega-3 og omega-6-fettsyrene. D6-saturasen har høyere affinitet for de mest umettede fettsyrene, og dette vil si at omega-3-fettsyren 18:3n-3 er prioritert først, deretter omega-6-fettsyren 18:2n-6 og til slutt oljesyren 18:1n-9. Normalt sett vil svært lite oljesyre desatureres av dette enzymet, noe vi kommer tilbake til lenger nede angående mangel på essensielle fettsyrer.</p>
<p>Etter en elongeringsreaksjon står vi igjen med fettsyrer med 20 karbonatomer, og disse er substrat for den neste desaturasen, D5-desaturase. Denne sørger for produksjon av de bioaktive fettsyrene arakidonsyre (AA, 20:4n-6) og eikosapentaensyre (EPA, 20:5n-3), som gir opphav til de hormonlignende signalstoffene eikosanoider, som vil bli viet en egen artikkel. Videre elongering av EPA gir produksjon av dokosaheksaensyre (DHA, 22:6n-3), som vi har mye av i nervesystemet. DHA gir også opphav til noen eikosanoider. Bildet under viser hele prosessen med å omdanne ALA til DHA.</p>
<p><img src="images/clipboard-2168023656.png" class="img-fluid">Desaturaseaktiviteten styres av hormoner. Insulin øker aktiviteten, og vil derfor bidra til å øke produksjonen av lengre, flerumettede fettsyrer. Glukagon og adrenalin vil på sin side redusere aktiviteten. Disse hormonene skilles ut som respons på endringer i blodsukkeret.</p>
</section>
<section id="fettsyrebalanse-og-mangel-på-essensielle-fettsyrer" class="level2">
<h2 class="anchored" data-anchor-id="fettsyrebalanse-og-mangel-på-essensielle-fettsyrer">Fettsyrebalanse og mangel på essensielle fettsyrer</h2>
<p>Som nevnt lenger oppe så prioriterer D6-desaturasen de mest umettede fettsyrene, slik at 18:3n-3 og 18:2n-6 prioriteres før 18:1n-9. Mengden av de ulike fettsyrene i kostholdet kan imidlertid gjøre at en fettsyre prioriteres over de andre uavhengig av desaturasens preferanser. Et eksempel på dette er dersom kostholdets innhold av omega-6 er langt høyere enn omega-3, noe som kan føre til at produksjonen av EPA og DHA blir mindre enn det det er behov for, og at produksjonen av AA blir for stor. Siden det er disse langkjedede fettsyrene som gir opphav til produksjonen av eikosanoider så kan kostholdet altså potensielt påvirke hvilke eikosanoider som blir produsert.</p>
<p>Dette bildet er imidlertid litt mer komplisert enn som så. Det overnevnte gjelder for det første bare inntaket av de essensielle fettsyrene med 18 karbonatomer i kjeden. Inntaket av langkjedede fettsyrer som EPA, DHA og AA fra kostholdet omgår D6-desaturasesteget. I tillegg kan også de flerumettede fettsyrene være substrat for fettsyrenedbrytning, slik at fordelingen av fettsyrene som tilføres i kostholdet ikke nødvendigvis tilsvarer fordelingen av fettsyrer som forlater leveren for å sendes til resten av kroppens celler. Mye tilsier at flerumettede fettsyrer prioriteres som substrat for β-oksidasjonen.</p>
<p>Dersom vi får i oss for lite av de essensielle flerumettede fettsyrene kan vi få mangel. En markør for mangel på disse er omega-9-fettsyren mead acid (20:3n-9), noe som er logisk hvis vi tenker tilbake på D6-desaturasens substratpreferanse. Dersom det ikke er nok omega-3 og -6 tilgjengelig vil den omdanne mer oljesyre til mead acid. Så lenge vi får i oss nok omega-3 og omega-6 vil konsentrasjonene av 20:3n-9 holde seg lave. En ulempe med denne markøren er at den bare tar hensyn til samlet inntak av omega-3 og -6, og ikke kan brukes til å identifisere mangel på en spesifikk fettsyre. For å identifisere dette kan man se på ratioen mellom de langkjedede omega-3 og omega-6-fettsyrene med 22 karbonatomer.</p>
<p>Det er mye kontrovers rundt hvor mye vi skal få i oss av omega-3 og omega-6, men som du nå kanskje har sett så er det flere faktorer som må tas med i beregningen, noe som gjør det vanskelig å fastsette hva som er et optimalt forhold mellom de ulike fettsyrene. WHO har foreløpig landet på en anbefaling om at forholdet mellom omega-3 og omega-6 i kostholdet bør være mellom 1:5 og 1:10.</p>
<p><em>Artikkelen er sist oppdatert august 2013</em></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>