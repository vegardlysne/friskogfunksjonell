<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vegard Lysne">
<meta name="dcterms.date" content="2012-07-11">

<title>Metthetsfølelsen - viktig når du skal velge kosthold – Frisk og Funksjonell (arkiv)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Frisk og Funksjonell (arkiv)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../poster.html"> 
<span class="menu-text">Alle poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../naeringsstoffer.html"> 
<span class="menu-text">Næringsstoffene</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../metabolismen.html"> 
<span class="menu-text">Metabolismen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../fysiologi.html"> 
<span class="menu-text">Fysiologi</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../hormonsystemet.html"> 
<span class="menu-text">Hormoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../kildekritikk.html"> 
<span class="menu-text">Kildekritikk</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../kosthold-institusjoner.html"> 
<span class="menu-text">Kosthold i helseinstitusjoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../om.html"> 
<span class="menu-text">Om bloggen</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Metthetsfølelsen - viktig når du skal velge kosthold</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vegard Lysne </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 11, 2012</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Det er gjort mange studier som har sammenlignet vekttapet ved ulike dietter, og en ting som har blitt gjentatt til det kjedsommelige er dette med at det ikke er noen forskjell mellom de ulike variantene. Spesielt har fokuset blitt rettet mot dietter basert på karbohydratrestriksjon og energirestriksjon, siden disse representerer det nye, populære og det gamle, tradisjonelle. Matens effekt på energiinntaket gjennom effekten på sult og metthet har derimot gått i glemmeboken, selv om det i virkeligheten må sies å være en veldig sentral faktor når det kommer til vektregulering.</p>
<p><strong>Viktige begreper</strong></p>
<p>For å få fullt utbytte av denne artikkelen er det viktig at vi er enige om betydningen av enkelte nøkkelbegreper.</p>
<ul class="incremental">
<li><p><strong>Karbohydratrestriksjon</strong> – brukes om dietter der en reduksjon i karbohydratinntaket er målet</p></li>
<li><p><strong>Energirestriksjon</strong> – brukes om dietter der en reduksjon av energiinntaket er målet</p></li>
<li><p><strong>Ad libitum</strong> – beskriver en diett der det ikke er benyttet energirestriksjon, og forsøkspersonene spiser så mye de vil.</p></li>
</ul>
<section id="fremgangsmåte-i-ulike-studier" class="level2">
<h2 class="anchored" data-anchor-id="fremgangsmåte-i-ulike-studier">Fremgangsmåte i ulike studier</h2>
<p>Det er mange studier som har sammenlignet effekten av ulike vektreduksjonsdietter, og fremgangsmåten varierer. I noen studier opereres det med energirestriksjon i begge intervensjonsgruppene, mens det i andre studier opereres med energirestriksjon i en gruppe og ad libitum i den andre. Dette er viktig å ha i bakhodet når vi skal tolke resultatene fra de ulike studiene.</p>
<p>De fleste studiene som sammenligner ulike dietter er såkalte intention-to-treat (ITT)-analyser. Dette innebærer at alle deltakerne inkluderes i sluttanalysen, uavhengig av om de har fulgt instruksjonene eller ikke. Dette ødelegger den reelle sammenligningen av de diettene man ser på, siden frafallet har en stor innvirkning på resultatene.</p>
<p>Det man i realiteten viser med en ITT-analyse er som navnet direkte oversatt sier, effekten av å be en større gruppe mennesker gjennomføre en intervensjon, ikke effekten av å faktisk følge intervensjonen. Overført til diettstudier betyr dette at man undersøker den gjennomsnittlige effekten av å be en gruppe mennesker følge en diett, noe som ikke gjenspeiler den effekten du kan forvente ved å faktisk følge dietten.</p>
<p>Resultatet etter en ITT-analyse vil være at effekten av intervensjonen fremstår dårligere enn den egentlig er. De som ikke fulgte instruksjonene vil selvfølgelig ikke oppnå disse resultatene, og når de tas med i totalen så vil gjennomsnittseffekten bli dårligere.</p>
<p>Richard David Feinman har skrevet mer om ITT <a href="http://rdfeinman.wordpress.com/2011/08/21/intention-to-treat-what-it-is-and-why-you-should-care/">her</a>.</p>
</section>
<section id="er-det-ingen-forskjell" class="level2">
<h2 class="anchored" data-anchor-id="er-det-ingen-forskjell">Er det ingen forskjell?</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-664475060.png" class="img-fluid figure-img"></p>
<figcaption>Figur fra Foster 2010 (2)</figcaption>
</figure>
</div>
<p>Når vi ser på studier som sammenligner ulike kosthold så hevdes det ofte at det ikke er en forskjell i vektnedgang og at diettene derfor er like effektive. Det er et stort problem ved å se på studiene på denne måten, og det er at det bare blir tatt hensyn til tallet på vekten, og ikke subjektive følelser eller andre effekter av kostholdet.</p>
<p>Det er ingen tvil om at det er <a href="http://www.friskogfunksjonell.no/energibalansen/" title="Energibalansen – hva sier den egentlig?">energibalansen</a> som over tid avgjør om vi går opp eller ned i vekt, men kroppsmassen vår er ikke en homogen masse, og det er minst like vesentlig hva denne massen består av. Muskelvev og fettvev har vidt ulike effekter på ulike helsemarkører, så å se på kroppsvekten isolert er ikke veldig hensiktsmessig.</p>
<p>I studier der både lavkarbo- og lavfettgruppen pålegges en lik energirestriksjon blir resultatene, ikke uventet, at begge gruppene går like mye ned i vekt, f.eks. Sacks 2009 [<a href="http://www.ncbi.nlm.nih.gov/pubmed/19246357" title="Sacks, 2009 #90">1</a>]. I de studiene der lavfettgruppen pålegges energirestriksjon og lavkarbogruppen får spise ad libitum er også vektnedgangen lik, og i noen studier gir lavkarbo ad libitum til og med en større effekt på vekten, f.eks. Foster 2010 [<a href="http://www.ncbi.nlm.nih.gov/pubmed/20679559" title="Foster, 2010 #232">2</a>] eller&nbsp;Shai 2008 [<a href="http://www.ncbi.nlm.nih.gov/pubmed/18635428" title="Shai, 2008 #116">3</a>].</p>
<p>Studier der begge gruppene spiser ad libitum er så vidt meg bekjent ikke gjennomført, men utifra hva de andre studiene viser er det liten tvil om at karbohydratrestriksjon ville vært mest effektivt, hvertfall som gjennomsnitt i større grupper. At det ikke er noen forskjell mellom diettene er derfor kanskje en sannhet med modifikasjoner.</p>
</section>
<section id="hvorfor-er-det-slik" class="level2">
<h2 class="anchored" data-anchor-id="hvorfor-er-det-slik">Hvorfor er det slik?</h2>
<p>Jeg skal selvfølgelig ikke påberope meg å vite hvorfor resultatene er som de er, men hvis jeg skal gjøre et forsøk vil det være mest naturlig å bruke sult- og metthetsregulering som den avgjørende faktoren. Et kosthold som i større grad stimulerer metthetsfølelsen vil naturlig bidra til å redusere matinntaket. Når karbohydratrestriksjon + ad libitum fører til at forsøkspersonene totalt sett spiser mindre energi enn de som blir pålagt energirestriksjon ser jeg ingen annen plausibel forklaring enn at dette skyldes en sterkere metthetsfølelse.</p>
<p>Det kan selvfølgelig også argumenteres for at forsøkspersonene finner maten ensidig og kjedelig, og at de derfor ikke spiser like mye som de ville gjort om maten var mer velsmakende, men over lengre perioder ser jeg ikke på det som sannsynlig at dette er viktigere enn metthetsfølelsen.</p>
<p>Hvorfor studiene indikerer at et kosthold med karbohydratrestriksjon gir en høyere metthet og deretter et lavere matinntak er umulig å si sikkert, men noen av de mulige forklaringene kan være:</p>
<ul class="incremental">
<li><p>Protein er det makronæringsstoffet som gir høyest metthet, så ved å øke proteininntaket kan vi oppnå denne effekten. De som legger om til lavkarbokosthold vil i de fleste tilfeller også øke inntaket av protein. I studier på lavkarbokosthold er det hvertfall vanlig at proteininntaket er høyest i lavkarbogruppen, noe som kan regnes som en feilkilde.</p></li>
<li><p>En annen teori er at matens innhold av mikronæringsstoffer avgjør hvor mye vi trenger å spise, og at man ved å spise næringsfattig mat (raffinerte produkter som vi spiser stadig mer av) stimulerer sultfølelsen fordi kroppen ønsker mer næring. En typisk lavkarbodiett er rik på næringsrike matvarer som kjøtt, fisk og egg, og raffinerte karbohydrater er gjerne det første som ryker ut av kostholdet.</p></li>
<li><p>En tredje teori er at et karbohydratredusert kosthold gir et lavere insulinnivå, noe som gjør energien i fettvevet mer tilgjengelige for kroppens celler, noe som reduserer behovet for å tilføre energi gjennom kostholdet. Dette vil imidlertid være mest relevant for de som skal ned i vekt, og ikke nødvendigvis for de som skal være vektstabile.</p></li>
</ul>
<p>Med stor sannsynlighet er det ikke bare en bestemt faktor som påvirker energiinntaket, men heller en kombinasjon av flere ting, og det er helt sikkert individuelle forskjeller på hva som gir den beste effekten. Dette understreker viktigheten av å tilpasse kostholdet til enkeltindividet.</p>
</section>
<section id="hva-har-dette-å-si-for-deg" class="level2">
<h2 class="anchored" data-anchor-id="hva-har-dette-å-si-for-deg">Hva har dette å si for deg?</h2>
<p>Det jeg til syvende og sist ønsker å understreke, som vanlig, er at en individuell tilnærming til kosthold er viktig. Ønsker du å gå ned i vekt, vil det være nødvendig å finne mat som gir deg nok metthet til at du ikke sprekker.</p>
<p>For noen kan det å redusere karbohydratinntaket være tilstrekkelig til at energiinntaket reduseres, mens et økt fokus på protein kan være løsningen for andre. Hos noen vil fettrik mat gi en god og langvarig metthetsfølelse, mens andre kan reagere motsatt og lett overspise på fett.</p>
<p>Det er likevel enkelte ting som vil gi økt metthet for de fleste, nemlig et økt inntak av proteinrik mat og grønnsaker, og et redusert inntak av raffinerte karbohydrater som sukker og fint mel. I blogginnleggene om enkle tiltak for å forbedre kostholdet (Del <a href="http://www.friskogfunksjonell.no/3-enkle-tiltak/" title="Enkle tiltak som kan forbedre kostholdet ditt – del 1">1</a>, <a href="http://www.friskogfunksjonell.no/3-tiltak-del-2/" title="Enkle tiltak som kan forbedre kostholdet ditt – del 2">2</a> og <a href="http://www.friskogfunksjonell.no/3-tiltak-del-3/" title="Enkle tiltak som kan forbedre kostholdet ditt – del 3">3</a>) gir jeg deg flere tips til ting du kan gjøre.</p>
<p><strong>Les også: <a href="http://www.friskogfunksjonell.no/hvilken-diett-skal-jeg-velge/" title="Hvilken diett skal jeg velge?">Hvilken diett skal jeg velge?</a></strong></p>
<section id="referanser" class="level4">
<h4 class="anchored" data-anchor-id="referanser">Referanser:</h4>
<ol class="incremental" type="1">
<li>Sacks FM, Bray GA, Carey VJ, Smith SR, Ryan DH, Anton SD, McManus K, Champagne CM, Bishop LM, Laranjo N <em>et al</em>: <strong>Comparison of weight-loss diets with different compositions of fat, protein, and carbohydrates</strong>. <em>N Engl J Med</em> 2009, <strong>360</strong>(9):859-873.</li>
<li>Foster GD, Wyatt HR, Hill JO, Makris AP, Rosenbaum DL, Brill C, Stein RI, Mohammed BS, Miller B, Rader DJ <em>et al</em>: <strong>Weight and metabolic outcomes after 2 years on a low-carbohydrate versus low-fat diet: a randomized trial</strong>. <em>Ann Intern Med</em> 2010, <strong>153</strong>(3):147-157.</li>
<li>Shai I, Schwarzfuchs D, Henkin Y, Shahar DR, Witkow S, Greenberg I, Golan R, Fraser D, Bolotin A, Vardi H <em>et al</em>: <strong>Weight loss with a low-carbohydrate, Mediterranean, or low-fat diet</strong>. <em>N Engl J Med</em> 2008, <strong>359</strong>(3):229-241.</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>