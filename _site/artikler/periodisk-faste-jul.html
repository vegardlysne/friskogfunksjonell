<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vegard Lysne">
<meta name="dcterms.date" content="2011-11-28">

<title>Periodisk faste til jul? – Frisk og Funksjonell (arkiv)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Frisk og Funksjonell (arkiv)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../poster.html"> 
<span class="menu-text">Alle poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../naeringsstoffer.html"> 
<span class="menu-text">Næringsstoffene</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../metabolismen.html"> 
<span class="menu-text">Metabolismen</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../fysiologi.html"> 
<span class="menu-text">Fysiologi</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../hormonsystemet.html"> 
<span class="menu-text">Hormoner</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../om.html"> 
<span class="menu-text">Om bloggen</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Periodisk faste til jul?</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">kosthold</div>
                <div class="quarto-category">faste</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vegard Lysne </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 28, 2011</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Julen er tradisjonelt sett en tid på året der vekten går opp, før nyttårsforsettene setter inn og de ekstra kiloene skal bekjempes med nebb og klør. Det ville gjerne vært mer praktisk å holde en mer stabil kroppsvekt året gjennom, men av flere grunner er det mer vanlig at vekten varierer. De gjeldende rådene handler om å spise regelmessig og at dette er veien til suksess. I denne artikkelen skal jeg fortelle litt om en alternativ måte å spise på, som har gitt gode resultater for mange, nemlig periodisk faste.</p>
<section id="hva-er-periodisk-faste" class="level2">
<h2 class="anchored" data-anchor-id="hva-er-periodisk-faste">Hva er periodisk faste?</h2>
<p>Periodisk faste er en måte å spise på som har økt i popularitet de siste årene. En av de fremste forkjemperne for dette kostholdsmønsteret er Martin Berkhan, som driver siden <a href="http://www.leangains.com/">Leangains</a>. I prinsippet er periodisk faste et veldig enkelt konsept. Du faster 14-16 timer i døgnet, for så å spise hele dagens energiinntak i det gjenværende spisevinduet på 8-10 timer. Det er både fordeler og ulemper med å spise på denne måten, og hvilke av disse som virker sterkest på deg vil avgjøre hvorvidt du vil trives med å spise slik eller ikke. Det er også noen vanlige myter som står i sterk kontrast til dette. La oss se på noen av disse tingene:</p>
<section id="fordeler" class="level4">
<h4 class="anchored" data-anchor-id="fordeler">Fordeler:</h4>
<ul>
<li><p>Du kan spise store måltider, og dermed spise deg skikkelig mett.</p></li>
<li><p>Etterhvert som du tilpasser kroppen dette måltidsmønsteret vil du ikke ha en sultfølelse som hopper opp og ned som en sprettball, og i større grad kunne fokusere på andre ting enn mat.</p></li>
</ul>
</section>
<section id="ulemper" class="level4">
<h4 class="anchored" data-anchor-id="ulemper">Ulemper:</h4>
<ul>
<li><p>Omstillingsfasen kan være preget av en kraftig sultfølelse, siden kroppen er vant til å få tilførsel av energ med jevnere mellomrom. Dette vil imidlertid raskt tilpasse seg hos de aller fleste.</p></li>
<li><p>Hvis du pleier å trene tidlig på morningen kan det være negativt dersom det går veldig lang tid før kroppen får mat. Jeg skriver kan, siden det finnes strategier for å unngå dette problemet, og mange gjør også dette og får gode resultater.</p></li>
</ul>
</section>
<section id="myter" class="level4">
<h4 class="anchored" data-anchor-id="myter">Myter:</h4>
<ul>
<li><p><strong>Man må spise frokost for å sette i gang forbrenningen.</strong> Dette er noe som har blitt gjentatt så mange ganger at det til slutt har blitt sant. Det finnes imidlertid ingen beviser for at dette skulle være tilfelle, og det er mange empiriske bevis på det motsatte. Alt handler om hva kroppen er vant til!</p></li>
<li><p><strong>Ved å spise sjeldent senker man forbrenningen (å spise ofte øker forbrenningen)</strong>. Dette er også et eksempel på hvordan noe blir sant bare det gjentas ofte nok. Måltidsfrekvensen har ingen påvirkning på totalforbrenningen, og isokaloriske (likt totalinntak) studier som sammenligner ulike måltidsmønstre, finner ingen forskjell når det gjelder den totale forbrenningen [1-3]. Så lenge energiinntaket er likt, spiller det altså ingen rolle for forbrenningen hvor mange måltider du fordeler dette på!</p></li>
<li><p><strong>Å spise sjelden fører til et ustabilt blodsukker.</strong> En artikkel som ble publisert i fjor [4] viste at blodsukkeret over en 12-timers periode var høyere ved 6 måltider enn ved 3, selv om den totale insulinresponsen var lik. Det kan altså synes som om en lavere måltidsfrekvens gir bedre kontroll på blodsukkeret.</p></li>
<li><p><strong>Du kan bare ta opp X mengde protein per måltid.</strong> Dette brukes ofte som et argument for at man bør fordele næringsinntaket over flere små måltider. Det finnes imidlertid ingen beviser for at dette skulle være sant. I realiteten vil så godt som alt du spiser absorberes i tarmen, uavhengig av hvor store måltider du spiser. Dette vil reguleres ved at maten tømmes ut av magesekken med en lavere hastighet.</p></li>
</ul>
</section>
</section>
<section id="hvordan-gjennomføre-periodisk-faste" class="level2">
<h2 class="anchored" data-anchor-id="hvordan-gjennomføre-periodisk-faste">Hvordan gjennomføre periodisk faste?</h2>
<p>Den enkle oppskriften på periodisk faste er å fastsette et spisevindu, f.eks. på 8 timer. Utenom dette spisevinduet inntar du bare vann, og evt kaffe/usøtet te. I denne perioden tvinger du kroppen til å hente energi fra egne lagre. Insulinnivået vil være lavt, og fettreservene vil derfor være lett tilgjengelige.</p>
<p>Hvor mange måltider du velger å spise i spisevinduet er individuelt, men 2-3 måltider er vanlig. Dette kommer an på hvor store energibehov du har, og dersom behovet er stort kan det være nødvendig med et ekstra måltid.</p>
<p>Når det gjelder sammensetningen av næringsstoffene, blir dette opp til den enkelte. Noen trives best med lite <a href="http://www.friskogfunksjonell.no/karbohydrater/" title="Karbohydrater">karbohydrater</a> og mye <a href="http://www.friskogfunksjonellno//fett/" title="Fetthttp://friskogfunksjonell.wordpress.com/2011/10/17/fett/">fett</a>, mens andre ikke takler fett så godt og heller velger karbohydrater. Som i artikkelen om <a href="http://www.friskogfunksjonell.no/en-enkel-innforing-i-lavkarbokosthold/" title="En kort innføring i lavkarbokosthold og tilpasning til din livsstil">lavkarbokosthold</a>, anbefaler jeg å legge fokuset på kvaliteten på matvarene fremfor fordelingen av næringsstoffer. Så lenge du spiser variert mat av god kvalitet, ordner sammensetningen av næringsstoffer seg selv.</p>
<section id="periodisk-faste-er-for-deg-som" class="level4">
<h4 class="anchored" data-anchor-id="periodisk-faste-er-for-deg-som">Periodisk faste er for deg som:</h4>
<ul>
<li><p>Liker å spise deg skikkelig mett på store måltider</p></li>
<li><p>Liker å sove litt ekstra om morningen i stedet for å bruke tid på å lage og spise frokost</p></li>
<li><p>Heller vil lage 2-3 gode måltider om dagen fremfor å spise kjedelig brødmat og andre raske alternativer</p></li>
<li><p>Liker å ha ekstra god kontroll på kostholdet og derfor fører regnskap med det du spiser. Dette blir enklere jo færre måltid du spiser.</p></li>
</ul>
</section>
<section id="periodisk-faste-er-ikke-for-deg-som" class="level4">
<h4 class="anchored" data-anchor-id="periodisk-faste-er-ikke-for-deg-som">Periodisk faste er ikke for deg som:</h4>
<ul>
<li><p><strong>Har inflammatorisk tarmsykdom (Crohns eller ulcerøs kolitt) eller er plaget med irritabel tarm.</strong> Ved disse tilstandene vil store måltider ikke være veien å gå, siden næringsopptaket i tarmen vil være lavere enn vanlig, og store måltider kan føre til ubesvær som diaré.</p></li>
<li><p><strong>Er idrettsutøver med store treningsmengder.</strong> Som idrettsutøver har du et økt energibehov, og det kan være vanskelig å få i seg all denne maten på et kort spisevindu. Ofte har du som idrettsutøver treningstider på ulike tider av døgnet, noe som gjør at det vil være vanskelig å tilpasse spisevinduet slik at det optimaliseres med tanke på treningen. Det er ikke dermed sagt at periodisk faste er uegnet mot idrett, og for enkeltpersoner kan det nok fungere vel så bra som et mer normalt måltidsmønster.</p></li>
</ul>
</section>
</section>
<section id="avslutning" class="level2">
<h2 class="anchored" data-anchor-id="avslutning">Avslutning</h2>
<p>Dersom du ønsker å prøve om periodisk faste er noe for deg, så er juletiden en perfekt anledning til å prøve! Denne tiden innebærer for de aller fleste ganske store middager, etterfulgt av kaker og kveldskos. For å unngå at vekten beveger seg for mye oppover i ferien, kan det være lurt å redusere energiinntaket tidlig på dagen for å kompensere.</p>
<p>Du vil nok merke at det er vanskelig å gjennomføre opplegget i begynnelsen, men om du gir det litt tid, så vil du merke at kroppen fort venner seg til det nye spisemønsteret. Dette er enda en grunn til at juleferien er den perfekte tiden å begynne, siden du har fri fra jobb og skole, som derfor ikke vil påvirkes av at du er i en omleggingsfase.</p>
<p>Det er ingenting magisk med periodisk faste fremfor andre spisemønstre, og valg av spisemønster handler hovedsakelig om trivsel og tilpasning til hverdagen. <strong>Det du skal ta med deg fra denne artikkelen er at du står veldig fritt til å velge det spisemønsteret du selv trives best med!</strong></p>
<p><strong>Referanser:</strong></p>
<ol type="1">
<li><p>La Bounty PM, Campbell BI, Wilson J, Galvan E, Berardi J, Kleiner SM, Kreider RB, Stout JR, Ziegenfuss T, Spano M et al: <strong>International Society of Sports Nutrition position stand: meal frequency</strong>. J Int Soc Sports Nutr 2011, 8:4.</p></li>
<li><p>Cameron JD, Cyr MJ, Doucet E: <strong>Increased meal frequency does not promote greater weight loss in subjects who were prescribed an 8-week equi-energetic energy-restricted diet</strong>. Br J Nutr 2010, 103(8):1098-1101.</p></li>
<li><p>Bellisle F, McDevitt R, Prentice AM: <strong>Meal frequency and energy balance.</strong> Br J Nutr 1997, 77 Suppl 1:S57-70.</p></li>
<li><p>Holmstrup ME, Owens CM, Fairchild TJ, Kanaley JA: <strong>Effect of meal frequency on glucose and insulin excursions over the course of a day</strong>. Volume 5. e-SPEN; 2010.</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>